<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="Author" content="Apple Inc." />
<meta name="viewport" content="width=1024" />
<link rel="shortcut icon" href="../../../favicon.ico" />
<link rel="icon" href="../../../favicon.ico" />
<link rel="stylesheet" href="https://www.apple.com/wss/fonts?family=Myriad+Set+Pro&amp;v=2" type="text/css" />
<link rel="stylesheet" href="../../../assets/styles/transition-global.css" type="text/css" />
<link rel="stylesheet" href="../../../assets/styles/transition-header.css" type="text/css" />
<link rel="stylesheet" href="https://devimages.apple.com.edgekey.net/assets/core/styles/adc.css" type="text/css" />
<link rel="stylesheet" href="https://devimages.apple.com.edgekey.net/assets/styles/topbar.css" type="text/css" />
<script src="https://devimages.apple.com.edgekey.net/assets/core/scripts/lib/prototype.js" type="text/javascript" charset="utf-8"></script>
<script src="https://devimages.apple.com.edgekey.net/assets/core/scripts/lib/scriptaculous.js" type="text/javascript" charset="utf-8"></script>
<script src="https://devimages.apple.com.edgekey.net/assets/core/scripts/browserdetect.js" type="text/javascript" charset="utf-8"></script>
<script src="https://devimages.apple.com.edgekey.net/assets/core/scripts/apple_core.js" type="text/javascript" charset="utf-8"></script>
<!--<script src="https://devimages.apple.com.edgekey.net/assets/core/scripts/search_decorator.js" type="text/javascript" charset="utf-8"></script>-->
<script src="https://devimages.apple.com.edgekey.net/assets/core/scripts/adc_core.js" type="text/javascript" charset="utf-8"></script>
<!--<script src="https://devimages.apple.com.edgekey.net/assets/scripts/ac_retina.js" type="text/javascript" charset="utf-8"></script>-->
<script src="https://devimages.apple.com.edgekey.net/assets/scripts/topbarDropdown.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
	document.write('<link rel="stylesheet" type="text/css" href="https://devimages.apple.com.edgekey.net/assets/styles/script.css" media="screen">');
</script>
<!-- Augmented Search -->
<!--<link rel="stylesheet" href="https://devimages.apple.com.edgekey.net/assets/styles/augmented_search.css" type="text/css">-->
<script src="https://devimages.apple.com.edgekey.net/assets/scripts/lib/jquery/jquery-1.11.0.min.js"></script>
<script>jQuery.noConflict();</script>
<script src="https://devimages.apple.com.edgekey.net/assets/scripts/lib/jquery/jquery.retinate.js" type="text/javascript" charset="utf-8"></script>
<!--<script src="https://devimages.apple.com.edgekey.net/assets/scripts/augmented_search.js"></script>-->
<script src="../../../assets/scripts/augmented_search.js"></script>
<script src="../../../assets/scripts/global-header.js"></script>

  <meta name="Author" content="Apple Inc.">
  <meta name="viewport" content="width=1024">
  <link rel="stylesheet" href="../AAT.css" type="text/css">
  <link rel="shortcut icon" href="https://devimages.apple.com.edgekey.net/favicon.ico">
  <link rel="icon" href="https://devimages.apple.com.edgekey.net/favicon.ico">
  <title>Justification Table</title>
</head>
<body class="white sidenav-page">
  <nav id="globalheader" role="navigation" aria-label="Global Navigation">
  <div id="gh-content" class="gh-content">
    <ul class="gh-menu">
      <li id="gh-menu-icon-toggle" class="gh-menu-icon gh-menu-icon-toggle enhance">
        <button id="gh-svg-icons" class="gh-svg-wrapper">
          <span class="text-replace">Menu</span>
          <svg x="0px" y="0px" width="100%" viewBox="0 0 96 96" class="gh-svg gh-svg-top" enable-background="new 0 0 96 96"><rect width="32" height="4" x="32" y="46" class="gh-svg-rect gh-svg-rect-top"></rect></svg>
          <svg x="0px" y="0px" width="100%" viewBox="0 0 96 96" class="gh-svg gh-svg-bottom" enable-background="new 0 0 96 96"><rect width="32" height="4" x="32" y="46" class="gh-svg-rect gh-svg-rect-bottom"></rect></svg>
        </button>
      </li>
      <li id="gh-menu-icon-home" class="gh-menu-icon gh-menu-icon-home">
        <a href="../../../index.html">
          <span class="text-replace">Apple Developer</span>
        </a>
      </li>
    </ul>
    <div class="gh-nav">
      <div class="gh-nav-view">
        <ul class="gh-nav-list">

          <li class="gh-tab gh-nav-developer" data-hires="true"><a class="gh-tab-link" href="../../../index.html"><span class="text-replace">Apple Developer</span></a></li>
          <li class="gh-tab gh-nav-technologies"><a class="gh-tab-link" href="../../../platforms/index.html">Platforms</a></li>
          <li class="gh-tab gh-nav-resources"><a class="gh-tab-link" href="../../../resources/index.html">Resources</a></li>
          <li class="gh-tab gh-nav-programs"><a class="gh-tab-link" href="../../../programs/index.html">Program</a></li>
          <li class="gh-tab gh-nav-support"><a class="gh-tab-link" href="../../../support/index.html">Support</a></li>
          <li class="gh-tab gh-nav-account">
            <a class="gh-tab-link gh-account-profile" href="https://developer.apple.com/account/">Account</a>
          </li>
          <li class="gh-tab gh-nav-search">

            <div id="gh-search" class="gh-search" role="search">
              <form action="/search/index.php" method="get" class="gh-search-form" id="gh-search-form" role="search">

                <div class="gh-search-input-wrapper">
                  <label for="gh-search-input" class="text-replace">Search Apple Developer</label>
                  <input type="text" name="q" id="gh-search-input" class="augmented gh-search-input" placeholder="Search Apple Developer" autocomplete="off" autocorrect="off" autocapitalize="off">
                </div>

                <button disabled type="submit" id="gh-search-submit" class="gh-search-submit gh-search-magnify"><span class="text-replace">Search Apple Developer</span></button>
                <button disabled type="reset" id="gh-search-reset" class="gh-search-reset"><span class="text-replace">Reset</span></button>

              </form>
            </div>

            <a class="gh-search-magnify" href="../../../search/index.html"><span class="text-replace">Search Apple Developer</span></a>

          </li>
        </ul>
      </div>
    </div>
  </div>
</nav>

  <div id="top">
<!-- SiteCatalyst code version: H.8. Copyright 1997-2006 Omniture, Inc. -->
<script type="text/javascript">
/* RSID: */
var s_account="appleglobal,appleusdeveloper"
</script>

<script type="text/javascript" src="https://www.apple.com/metrics/scripts/s_code_h.js"></script>
<script type="text/javascript">
s.pageName= AC && AC.Tracking && AC.Tracking.pageName();
s.channel="www.us.developer"

/************* DO NOT ALTER ANYTHING BELOW THIS LINE ! **************/
var s_code=s.t();if(s_code)document.write(s_code)</script>
<!-- End SiteCatalyst code version: H.8. -->
</div>

  <div id="content" class="content" data-hires="false">
    <section>
  <div id="navBar">
    <!-- NAVBARSTART -->
    <p class="bold"><a href="../index.html">TrueType Reference Manual</a></p>
    <ul class="outer">
      <li><a href="../RM01/Chap1.html">Digitizing Letterforms</a></li>
      <li><a href="../RM02/Chap2.html">The Font Engine</a></li>
      <li><a href="../RM03/Chap3.html">Instructing Fonts</a></li>
      <li><a href="../RM04/Chap4.html">The Graphics State</a></li>
      <li><a href="../RM05/Chap5.html">The Instruction Set</a></li>
      <li><a href="Chap6.html">Font Tables</a></li>
      <li class="c1">
        <ul class="inner">
          <li><a href="Chap6.html#Intro">Introduction</a></li>
          <li><a href="Chap6.html#Types">Data Types</a></li>
          <li><a href="Chap6.html#Overview">Overview of TrueType</a></li>
          <li><a href="Chap6AATIntro.html">Overview of AAT</a></li>
          <li><a href="Chap6Tables.html">Special Tables</a></li>
          <li><a href="Chap6.html#Directory">The Font Directory</a></li>
          <li><a href="Chap6acnt.html">The <code>'acnt'</code> table</a></li>
          <li><a href="Chap6ankr.html">The <code>'ankr'</code> table</a></li>
          <li><a href="Chap6avar.html">The <code>'avar'</code> table</a></li>
          <li><a href="Chap6bdat.html">The <code>'bdat'</code> table</a></li>
          <li><a href="Chap6bhed.html">The <code>'bhed'</code> table</a></li>
          <li><a href="Chap6bloc.html">The <code>'bloc'</code> table</a></li>
          <li><a href="Chap6bsln.html">The <code>'bsln'</code> table</a></li>
          <li><a href="Chap6cmap.html">The <code>'cmap'</code> table</a></li>
          <li><a href="Chap6cvar.html">The <code>'cvar'</code> table</a></li>
          <li><a href="Chap6cvt.html">The <code>'cvt '</code> table</a></li>
          <li><a href="Chap6EBSC.html">The <code>'EBSC'</code> table</a></li>
          <li><a href="Chap6fdsc.html">The <code>'fdsc'</code> table</a></li>
          <li><a href="Chap6feat.html">The <code>'feat'</code> table</a></li>
          <li><a href="Chap6fmtx.html">The <code>'fmtx'</code> table</a></li>
          <li><a href="Chap6fond.html">The <code>'fond'</code> table</a></li>
          <li><a href="Chap6fpgm.html">The <code>'fpgm'</code> table</a></li>
          <li><a href="Chap6fvar.html">The <code>'fvar'</code> table</a></li>
          <li><a href="Chap6gasp.html">The <code>'gasp'</code> table</a></li>
          <li><a href="Chap6gcid.html">The <code>'gcid'</code> table</a></li>
          <li><a href="Chap6glyf.html">The <code>'glyf'</code> table</a></li>
          <li><a href="Chap6gvar.html">The <code>'gvar'</code> table</a></li>
          <li><a href="Chap6hdmx.html">The <code>'hdmx'</code> table</a></li>
          <li><a href="Chap6head.html">The <code>'head'</code> table</a></li>
          <li><a href="Chap6hhea.html">The <code>'hhea'</code> table</a></li>
          <li><a href="Chap6hmtx.html">The <code>'hmtx'</code> table</a></li>
          <li>The <code>'just'</code> table</li>
          <li><a href="Chap6kern.html">The <code>'kern'</code> table</a></li>
          <li><a href="Chap6kerx.html">The <code>'kerx'</code> table</a></li>
          <li><a href="Chap6lcar.html">The <code>'lcar'</code> table</a></li>
          <li><a href="Chap6loca.html">The <code>'loca'</code> table</a></li>
          <li><a href="Chap6ltag.html">The <code>'ltag'</code> table</a></li>
          <li><a href="Chap6maxp.html">The <code>'maxp'</code> table</a></li>
          <li><a href="Chap6meta.html">The <code>'meta'</code> table</a></li>
          <li><a href="Chap6mort.html">The <code>'mort'</code> table</a></li>
          <li><a href="Chap6morx.html">The <code>'morx'</code> table</a></li>
          <li><a href="Chap6name.html">The <code>'name'</code> table</a></li>
          <li><a href="Chap6opbd.html">The <code>'opbd'</code> table</a></li>
          <li><a href="Chap6OS2.html">The <code>'OS/2'</code> table</a></li>
          <li><a href="Chap6post.html">The <code>'post'</code> table</a></li>
          <li><a href="Chap6prep.html">The <code>'prep'</code> table</a></li>
          <li><a href="Chap6prop.html">The <code>'prop'</code> table</a></li>
          <li><a href="Chap6sbix.html">The <code>'sbix'</code> table</a></li>
          <li><a href="Chap6trak.html">The <code>'trak'</code> table</a></li>
          <li><a href="Chap6vhea.html">The <code>'vhea'</code> table</a></li>
          <li><a href="Chap6vmtx.html">The <code>'vmtx'</code> table</a></li>
          <li><a href="Chap6xref.html">The <code>'xref'</code> table</a></li>
          <li><a href="Chap6Zapf.html">The <code>'Zapf'</code> table</a></li>
        </ul>
      </li>
      <li><a href="../RM07/appendixA.html">Instruction Set Summary</a></li>
      <li><a href="../RM07/appendixB.html">Glyph Mappings</a></li>
      <li><a href="../RM08/appendixE.html">Converting Outlines</a></li>
	<li><a href="../RM09/AppendixF.html">Font Feature Registry</a></li>
    </ul><!-- NAVBAREND -->
  </div>
  <div id="chapterContent">
    <header><h1><a name="just" id="just"></a>The <code>'just'</code> table</h1></header>
    <h2>General table information</h2>
    <h2>Introduction</h2>
    <p>The <em>justification table</em> (tag name: <code>'just'</code>) allows you to design your AAT fonts to accommodate special justification functions. Justification is the process of typographically stretching or shrinking a line of text to fit within a given height or width. A line of text is a collection of glyphs and each glyph on the line is associated with left and right (or top and bottom) width delta factors, a justification category, and a justification priority.</p>
    <p>There are many different options you can choose to control justification of text in your font, including the following:</p>
    <ul>
      <li>Separate justification factors for the left-side and the right-side of any glyph.</li>
      <li>Different sets of justification factors to be used in cases where the line needs to loosen as well as cases where the line needs to tighten.</li>
      <li>Kashida glyphs, which are glyphs that are used to connect other glyphs in connected scripts (such as Arabic or cursive roman).</li>
      <li>Control over the order in which glyphs participate in the justification process.</li>
      <li>Selection of certain glyphs to be "unlimited" so that they always soak up all remaining gap during justification.</li>
      <li>Contextual, state table-based designation of justification behaviors, so that the identical glyph might behave quite differently in different contexts.</li>
      <li>Having glyphs change shape to fill up gap (copyfitting), either by simply stretching, or by using the font variation mechanism.</li>
      <li>Ability to undo ligatures back into their component parts if too much white space is being added during justification.</li>
    </ul>
    <p>The <em>width delta factors</em> are fractional measurements by which the glyph can expand or contract on each side. (For some scripts, the sides of a glyph are on the left and right; for others, they are the top and bottom.) You determine the width delta factors as a distance, measured in points, relative to a one point glyph. In order to calculate the value of the width delta factor for the glyph at a larger point size, multiply this distance by that point size. For example, a width delta factor value of 2.5 for the right-side grow factor means that 2.5 points of white space may be added to the right side of the glyph at size one point. For example, if a 12-point glyph had a right-side growth width delta factor of 2.5, 30 points of white space could be added to the right side of the glyph. Some glyphs are also designated as <em>unlimited</em>, meaning they take up all available gap on a line. For example, if you never want interglyph spacing added, then the whitespace glyph or glyphs can be designated as unlimited.</p>
    <p>The <em>justification category</em> allows the set of width delta factors used with a glyph to vary at different places on the line. For example, a glyph may exhibit different behavior according to whether it occurred at the beginning or end of a word. Allowing glyphs to have different width delta factors at different places on a line or in a word is especially important in non-roman languages such as Arabic. You include a justification category state table in order to assign the appropriate justification category to the glyph.</p>
    <p>The <em>justification priority</em> identifies the stage at which a glyph starts to participate in the justification process. The four priorities are:</p>
    <ul>
      <li>Kashida priority. This is the highest priority during justification. Any glyphs having this priority are handled first. This priority is used primarily in Arabic, where it identifies glyphs that are to be extended using kashida extender bars, rather than by adding whitespace.</li>
      <li>Whitespace priority. This is the next highest priority. You should give whitespace glyphs (as identified in the <a href="Chap6prop.html">glyph properties table</a>) this priority.</li>
      <li>Inter-glyph priority. This priority should be used for any remaining glyphs. Glyphs at this priority participate in the justification process later than glyphs of the previous two priorities.</li>
      <li>Null priority. This priority is not normally included in fonts; rather, it is used by applications to override justification priorities when text is laid out and so should not be used for any actual glyphs in the font.</li>
    </ul>
    <p>The justification table stores justification information for the glyphs of your font and for the font as a whole. You can store both horizontal and vertical adjustments or adjustments for one direction.</p>
    <h2>Justification Table Format</h2>
    <p>The justification table is shown in Figure 4-1. The table begins with an overall table header that points to the separate horizontal and vertical justification headers. Each of these headers points to the subtables that contain the information needed in order to justify the font in either the horizontal or vertical direction.</p>
    <p>Figure 4-1 The justification table</p>
    <p><img src="FF35.gif" width="265px" height="488px" naturalsizeflag="3"></p>
    <p>The top level of the justification table has the version number of the table, the format number of the justification table, and the offsets to the horizontal and vertical justification tables. The top-level format of the justification table is shown in Table 4-1.</p>
    <table border="1" cellspacing="2" cellpadding="0">
      <tr align="left" valign="middle">
        <th>
          <div align="left">
            Type
          </div>
        </th>
        <th>
          <div align="left">
            Name
          </div>
        </th>
        <th align="left">
          <div align="left">
            Description
          </div>
        </th>
      </tr>
      <tr align="left" valign="middle">
        <td>Fixed</td>
        <td>version</td>
        <td class="description">Version number of the justification table (0x00010000 for the current version).</td>
      </tr>
      <tr align="left" valign="middle">
        <td>UInt16</td>
        <td>format</td>
        <td class="description">Format of the justification table (set to 0).</td>
      </tr>
      <tr align="left" valign="middle">
        <td>UInt16</td>
        <td>horizOffset</td>
        <td class="description">Byte offset from the start of the justification table to the header for tables that contain justification information for horizontal text. If you are not including this information, store 0.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>UInt16</td>
        <td>vertOffset</td>
        <td class="description">Byte offset from the start of the justification table to the header for tables that contain justification information for vertical text. If you are not including this information, store 0.</td>
      </tr>
    </table>
    <p>You can store separate tables for information about how your font handles horizontal justification as opposed to vertical justification. The <code>horizOffset</code> and <code>vertOffset</code> fields of the header point to direction-specific justification headers of type <code>JustificationHeader</code>. These direction-specific justification header contains offsets to tables that describe data your font needs during the justification process: justification category, the width delta factors of the font, and the postcompensation subtable, an optional table allows you to specify justification behavior that your font can display under specific circumstances. The format of the <code>JustificationHeader</code> is shown in the following table:</p>
    <table border="1" cellspacing="2" cellpadding="0">
      <tr align="left" valign="middle">
        <th>
          <div align="left">
            Type
          </div>
        </th>
        <th>
          <div align="left">
            Name
          </div>
        </th>
        <th align="left">
          <div align="left">
            Description
          </div>
        </th>
      </tr>
      <tr align="left" valign="middle">
        <td>UInt16</td>
        <td>justClassTableOffset</td>
        <td class="description">Offset to the justification category state table.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>UInt16</td>
        <td>wdcTableOffset</td>
        <td class="description">Offset from start of justification table to start of the subtable containing the width delta factors for the glyphs in your font.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>UInt16</td>
        <td>pcTableOffset</td>
        <td class="description">Offset from start of justification table to start of postcompensation subtable (set to zero if none).</td>
      </tr>
      <tr align="left" valign="middle">
        <td>variable</td>
        <td>lookupTable</td>
        <td class="description">Lookup table associating glyphs with width delta clusters. See the description of Width Delta Clusters table for details on how to interpret the lookup values.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>variable</td>
        <td>widthDeltaClusters</td>
        <td class="description">The width delta clusters table.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>variable</td>
        <td>postcompTable</td>
        <td class="description">The postcompensation subtable, if present in the font.</td>
      </tr>
    </table>
    <h3>The justification category State Table</h3>
    <p>The justification category <a href="Chap6Tables.html#StateTables">state table</a> allows you to associate a glyph with a justification category that depends on the context of the glyph. The state table has the following format:</p>
    <table border="1" cellspacing="2" cellpadding="0">
      <tr align="left" valign="middle">
        <th>
          <div align="left">
            Type
          </div>
        </th>
        <th>
          <div align="left">
            Name
          </div>
        </th>
        <th align="left">
          <div align="left">
            Description
          </div>
        </th>
      </tr>
      <tr align="left" valign="middle">
        <td><a href="Chap6mort.html#MorphSubtableHeader">MorphSubtableHeader</a></td>
        <td>morphHeader</td>
        <td class="description">Metamorphosis-style subtable header.</td>
      </tr>
      <tr align="left" valign="middle">
        <td><a href="Chap6Tables.html#StateHeader">StateHeader</a></td>
        <td>stHeader</td>
        <td class="description">The justification insertion state table header</td>
      </tr>
    </table>
    <p>For this state table, the entries in the entry subtable comprise only the <code>newState</code> field and the <code>flags</code> field; there are no values in the <code>glyphOffsets</code> array. The interpretation of the <code>flags</code> field for this state table are given in the following table:</p>
    <table border="1" cellspacing="2" cellpadding="0">
      <tr align="left" valign="middle">
        <th>
          <div align="left">
            Mask value
          </div>
        </th>
        <th>
          <div align="left">
            Name
          </div>
        </th>
        <th align="left">
          <div align="left">
            Interpretation
          </div>
        </th>
      </tr>
      <tr align="left" valign="middle">
        <td>0x8000</td>
        <td>setMark</td>
        <td class="description">If set, make the current glyph the marked glyph.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>0x4000</td>
        <td>dontAdvance</td>
        <td class="description">If set, don't advance to the next glyph before going to the new state.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>0x3F80</td>
        <td>markCategory</td>
        <td class="description">The justification category for the marked glyph if nonzero.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>0x007F</td>
        <td>currentCategory</td>
        <td class="description">The justification category for the current glyph if nonzero.</td>
      </tr>
    </table>
    <p>The justification category is a 7-bit value that allows the set of factors used with that glyph to vary at different places on the line. As a line is being analyzed, each glyph is assigned a justification category given the glyph index and context. In this way, you can provide subtle differences in the justification behavior of the same glyph. For example, a lowercase 'e' at the end of a word can behave differently from one at the beginning or in the middle of the word. This justification category is then matched to a width delta record, which contains the limits of the glyph to grow and shrink.</p>
    <p>If the justification category fields (<code>markCategory</code> and <code>currentCategory</code>) are non zero, they are used to set the justification category of the corresponding glyph. If the <code>setMark</code> flag is set, the position of the current glyph in the glyph array is remembered, making it the marked glyph.</p>
    <h3>The Width Delta Clusters Table</h3>
    <p>The width delta factors for justification categoryes are stored in <em>width delta clusters</em>. Each cluster contains a number of <em>width delta pairs</em>. Each pair maps a justification category to a <em>width delta record</em>, which contains information about the limits that you set on the ability of glyphs in that justification category to grow and shrink.</p>
    <p>A <a href="Chap6Tables.html#LookupTables">lookup table</a> is used to find the width delta cluster associated with a particular glyph. This is how to interpret the lookup value for each of the five lookup table formats:</p>
    <table border="1" cellspacing="2" cellpadding="0">
      <tr align="left" valign="middle">
        <th>
          <div align="left">
            Lookup<br>
            table<br>
            format
          </div>
        </th>
        <th align="left">
          <div align="left">
            Interpretation
          </div>
        </th>
      </tr>
      <tr align="left" valign="middle">
        <td>0</td>
        <td class="description">Array of 16-bit offsets, one for each glyph in the font. Each offset is from the start of the Width Delta Clusters table to the particular width delta cluster for that glyph.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>2</td>
        <td class="description">The value of each lookupSegment is a 16-bit offset from the start of the Width Delta Clusters table to the particular width delta cluster for the glyphs in that segment.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>4</td>
        <td class="description">The value of each lookupSegment is a 16-bit offset from the start of the lookup table to an array of 16-bit offsets, one for each glyph in the segment. Each offset is from the start of the Width Delta Clusters table to the particular width delta clust</td>
      </tr>
      <tr align="left" valign="middle">
        <td>6</td>
        <td class="description">The value of each lookupSingle is a 16-bit offset from the start of the Width Delta Clusters table to the particular width delta cluster for that glyph.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>8</td>
        <td class="description">The valueArray is an array of 16-bit offsets, one for each glyph in the trimmed array. Each offset is from the start of the Width Delta Clusters table to the particular width delta cluster for that glyph.</td>
      </tr>
    </table>
    <p>A width delta cluster, represented by a <code>WidthDeltaCluster</code> record, is a collection of one or more width delta pairs, sorted by the value of its <code>justClass</code> field, beginning at 0. The cluster must start on a longword boundary. The format of the width delta cluster is as follows:</p>
    <table border="1" cellspacing="2" cellpadding="0">
      <tr align="left" valign="middle">
        <th>
          <div align="left">
            Type
          </div>
        </th>
        <th>
          <div align="left">
            Name
          </div>
        </th>
        <th align="left">
          <div align="left">
            Description
          </div>
        </th>
      </tr>
      <tr align="left" valign="middle">
        <td>UInt32</td>
        <td>count</td>
        <td class="description">Number of width delta pair records that follow.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>WidthDeltaPair</td>
        <td>wdPairs</td>
        <td class="description">The width delta pairs records</td>
      </tr>
    </table>
    <p>A width delta pair, represented by a <code>WidthDeltaPair</code> record, associates a justification category with a width delta record. The format of the width delta pair is as follows:</p>
    <table border="1" cellspacing="2" cellpadding="0">
      <tr align="left" valign="middle">
        <th>
          <div align="left">
            Type
          </div>
        </th>
        <th>
          <div align="left">
            Name
          </div>
        </th>
        <th align="left">
          <div align="left">
            Description
          </div>
        </th>
      </tr>
      <tr align="left" valign="middle">
        <td>UInt32</td>
        <td>justClass</td>
        <td class="description">The justification category associated with the wdRecord field. Only 7 bits of this field are used. (The other bits are used as padding to guarantee longword alignment of the following record).</td>
      </tr>
      <tr align="left" valign="middle">
        <td>JustWidthDeltaEntry</td>
        <td>wdRecord</td>
        <td class="description">The actual width delta record.</td>
      </tr>
    </table>
    <p>You use a width delta record (of type <code>JustWidthDeltaEntry</code>) to store information about the grow and shrink factors allotted to this class of glyphs. The record's format is as follows:</p>
    <table border="1" cellspacing="2" cellpadding="0">
      <tr align="left" valign="middle">
        <th>
          <div align="left">
            Type
          </div>
        </th>
        <th>
          <div align="left">
            Name
          </div>
        </th>
        <th align="left">
          <div align="left">
            Description
          </div>
        </th>
      </tr>
      <tr align="left" valign="middle">
        <td>Fixed</td>
        <td>beforeGrowLimit</td>
        <td class="description">The ratio by which the advance width of the glyph is permitted to grow on the left or top side.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>Fixed</td>
        <td>beforeShrinkLimit</td>
        <td class="description">The ratio by which the advance width of the glyph is permitted to shrink on the left or top side.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>Fixed</td>
        <td>afterGrowLimit</td>
        <td class="description">The ratio by which the advance width of the glyph is permitted to grow on the right or bottom side.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>Fixed</td>
        <td>afterShrinkLimit</td>
        <td class="description">The ratio by which the advance width of the glyph is at most permitted to shrink on the right or bottom side.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>UInt16</td>
        <td>growFlags</td>
        <td class="description">Flags controlling the grow case.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>UInt16</td>
        <td>shrinkFlags</td>
        <td class="description">Flags controlling the shrink case.</td>
      </tr>
    </table>
    <p>The growFlags and shrinkFlags bits mask values are as follows:</p>
    <table border="1" cellspacing="2" cellpadding="0">
      <tr align="left" valign="middle">
        <th>
          <div align="left">
            Mask value
          </div>
        </th>
        <th align="left">
          <div align="left">
            Interpretation
          </div>
        </th>
      </tr>
      <tr align="left" valign="middle">
        <td>0xE000</td>
        <td class="description">Reserved. You should set these bits to zero.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>0x1000</td>
        <td class="description">The glyph can take unlimited gap. When this glyph participates in the justification process, it and any other glyphs on the line having this bit set absorb all the remaining gap.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>0x0FF0</td>
        <td class="description">Reserved. You should set these bits to zero.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>0x000F</td>
        <td class="description">The justification priority of the glyph.</td>
      </tr>
    </table>
    <p>The justification priority of the glyph controls when this glyph enters into the justification process. The lower this value is, the earlier a glyph begins to participate. The justification priorities are described in this table:</p>
    <table border="1" cellspacing="2" cellpadding="0">
      <tr align="left" valign="middle">
        <th>
          <div align="left">
            Priority
          </div>
        </th>
        <th align="left">
          <div align="left">
            Meaning
          </div>
        </th>
      </tr>
      <tr align="left" valign="middle">
        <td>0</td>
        <td class="description">Kashida priority. This is the highest priority during justification.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>1</td>
        <td class="description">Whitespace priority. Any whitespace glyphs (as identified in the glyph properties table) will get this priority.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>2</td>
        <td class="description">Inter-character priority. Give this to any remaining glyphs.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>3</td>
        <td class="description">Null priority. You should set this priority for glyphs that only participate in justification after the above priorities. Normally all glyphs have one of the previous three values. If you don't want a glyph to participate in justification, and you don't want to set its factors to zero, you may instead assign it to the null priority.</td>
      </tr>
    </table>
    <h3>The Postcompensation Subtable</h3>
    <p>You can specify alternate glyph behaviors under certain conditions. For instance, you can specify that ligatures should break into their component parts when too much space is being added to a justified line. These alternate behaviors are called <em>postcompensation actions</em> and are stored in the postcompensation subtable. You can map one or several glyph indexes in your font to a single type of postcompensation action record. You do not have to map all glyph indexes to an action. The postcompensation subtable, which contains these actions, is optional in your font.</p>
    <p>The format of the postcompensations table is as follows:</p>
    <table border="1" cellspacing="2" cellpadding="0">
      <tr align="left" valign="middle">
        <th>
          <div align="left">
            Type
          </div>
        </th>
        <th>
          <div align="left">
            Name
          </div>
        </th>
        <th align="left">
          <div align="left">
            Description
          </div>
        </th>
      </tr>
      <tr align="left" valign="middle">
        <td>variable</td>
        <td>pcLookupTable</td>
        <td class="description">Lookup table associating glyphs with postcompensation action records. See below for details on how to interpret the lookup values.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>variable</td>
        <td>pcActionRecords</td>
        <td class="description">Actions records whose offsets are contained in the previous lookup table.</td>
      </tr>
    </table>
    <p>A lookup table is used to find the postocmpensation action record associated with a particular glyph. Note that for this table a lookup value of 0 is interpreted as meaning that no postcompensation action should be performed for that glyph. This is how to interpret the lookup value for each of the 5 lookup table formats:</p>
    <table border="1" cellspacing="2" cellpadding="0">
      <tr align="left" valign="middle">
        <th>
          <div align="left">
            Lookup table format
          </div>
        </th>
        <th align="left">
          <div align="left">
            Interpretation
          </div>
        </th>
      </tr>
      <tr align="left" valign="middle">
        <td>0</td>
        <td class="description">Array of 16-bit offsets, one for each glyph in the font. Each offset is from the start of the Postcompensation lookup table to the particular postcompensation action record for that glyph.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>2</td>
        <td class="description">The value of each lookupSegment is a 16-bit offset from the start of the Postcompensation lookup table to the particular postcompensation action record for the glyphs in that segment.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>4</td>
        <td class="description">The value of each lookupSegment is a 16-bit offset from the start of the lookup table to an array of 16-bit offsets, one for each glyph in the segment. Each offset is from the start of the Postcompensation lookup table to the particular postcompensation action record for that glyph.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>6</td>
        <td class="description">The value of each lookupSingle is a 16-bit offset from the start of the Postcompensation lookup table to the particular postcompensation action record for that glyph.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>8</td>
        <td class="description">The valueArray is an array of 16-bit offsets, one for each glyph in the trimmed array. Each offset is from the start of the Postcompensation lookup table to the particular postcompensation action record for that glyph.</td>
      </tr>
    </table>
    <p>The PostcompensationAction record has the following format:</p>
    <table border="1" cellspacing="2" cellpadding="0">
      <tr align="left" valign="middle">
        <th>
          <div align="left">
            Type
          </div>
        </th>
        <th>
          <div align="left">
            Name
          </div>
        </th>
        <th align="left">
          <div align="left">
            Description
          </div>
        </th>
      </tr>
      <tr align="left" valign="middle">
        <td>UInt32</td>
        <td>actionCount</td>
        <td class="description">Number of ActionSubrecord records in the following array.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>ActionSubrecord</td>
        <td>actSubrecord[]</td>
        <td class="description">Array of ActionSubrecord records.</td>
      </tr>
    </table>
    <p>An ActionSubrecord has the following format:</p>
    <table border="1" cellspacing="2" cellpadding="0">
      <tr align="left" valign="middle">
        <th>
          <div align="left">
            Type
          </div>
        </th>
        <th>
          <div align="left">
            Name
          </div>
        </th>
        <th align="left">
          <div align="left">
            Description
          </div>
        </th>
      </tr>
      <tr align="left" valign="middle">
        <td>UInt16</td>
        <td>actionClass</td>
        <td class="description">The JustClass value associated with this ActionSubrecord.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>UInt16</td>
        <td>actionType</td>
        <td class="description">The type of postcompensation action.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>UInt32</td>
        <td>actionLength</td>
        <td class="description">Length of this ActionSubrecord record, which must be a multiple of 4.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>variable</td>
        <td>actionData</td>
        <td class="description">Data. The format of this data depends on the value of the actionType field.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>variable</td>
        <td>padding</td>
        <td class="description">Extra bytes, if needed, to guarantee that the length of this ActionSubrecord is a multiple of 4.</td>
      </tr>
    </table>
    <p>The following table shows the action types that are supported:</p>
    <table border="1" cellspacing="2" cellpadding="0">
      <tr align="left" valign="middle">
        <th>
          <div align="left">
            Action Type
          </div>
        </th>
        <th align="left">
          <div align="left">
            Description
          </div>
        </th>
      </tr>
      <tr align="left" valign="middle">
        <td>0</td>
        <td class="description">Decomposition action.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>1</td>
        <td class="description">Unconditional add glyph action.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>2</td>
        <td class="description">Conditional add glyph action.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>3</td>
        <td class="description">Stretch glyph action.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>4</td>
        <td class="description">Ductile glyph action.</td>
      </tr>
      <tr>
        <td>5</td>
        <td class="description">Repeated add glyph action.</td>
      </tr>
    </table>
    <h4>Decomposition Action</h4>
    <p>Ligatures may be broken into their component pieces if the amount of extra interglyph space added by the justification process is too large. The <em>distance factor</em> is the ratio of growth you want with respect to the glyph at 1 point size. The amount of extra interglyph space is determined by the distance factor. For example, if the upper limit for growth at 0.5, then a 12-point ligature is decomposed if it has to add more than 6 points of whitespace.</p>
    <p>The format of the <code>actionData</code> field of the <code>ActionSubrecord</code> record for this type of postcompensation action is given in the following table:</p>
    <table border="1" cellspacing="2" cellpadding="0">
      <tr align="left" valign="middle">
        <th>
          <div align="left">
            Type
          </div>
        </th>
        <th>
          <div align="left">
            Name
          </div>
        </th>
        <th align="left">
          <div align="left">
            Description
          </div>
        </th>
      </tr>
      <tr align="left" valign="middle">
        <td>fixed</td>
        <td>lowerLimit</td>
        <td class="description">If the distance factor is less than this value, then the ligature is decomposed.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>fixed</td>
        <td>upperLimit</td>
        <td class="description">If the distance factor is greater than this value, then the ligature is decomposed.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>UInt16</td>
        <td>order</td>
        <td class="description">Numerical order in which this ligature will be decomposed; you may want infrequent ligatures to decompose before more frequent ones. The ligatures on the line of text will decompose in increasing value of this field.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>UInt16</td>
        <td>decomposedCount</td>
        <td class="description">Number of 16-bit glyph indexes that follow; the ligature will be decomposed into these glyphs.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>UInt16</td>
        <td>glyphs[]</td>
        <td class="description">Array of decomposed glyphs.</td>
      </tr>
    </table>
    <h4>Unconditional Add Glyph Action</h4>
    <p>If the advance width of a glyph is growing, then a specified single glyph—such as a simple horizontal kashida—is added after this glyph.</p>
    <p>The <code>actionData</code> portion of the <code>ActionSubrecord</code> has the following format for <code>actionType</code> value of 1:</p>
    <table border="1" cellspacing="2" cellpadding="0">
      <tr align="left" valign="middle">
        <th>
          <div align="left">
            Type
          </div>
        </th>
        <th>
          <div align="left">
            Name
          </div>
        </th>
        <th align="left">
          <div align="left">
            Description
          </div>
        </th>
      </tr>
      <tr align="left" valign="middle">
        <td>UInt16</td>
        <td>addGlyph</td>
        <td class="description">Glyph that should be added if the distance factor is growing.</td>
      </tr>
    </table>
    <h4>Conditional Add Glyph Action</h4>
    <p>An <code>actionType</code> of 2 is a conditional add glyph action. This action has two effects. First, as in the unconditional add glyph action, an extra glyph is added after the glyph (instead of whitespace) in the grow case. However, rather than always adding this extra glyph, a test is performed against a specified factor. If the amount of extra space to be added is less than this factor then this action is exactly like the unconditional add glyph action.</p>
    <p>If, however, the amount of extra space added is greater than or equal to the factor, then in addition to adding the specified extra glyph, the original glyph itself is to be changed into a different glyph. This is useful, for example, in Arabic, where certain letterforms that occur at the ends of words (for example, a final nun) change to special wider forms if much extra space is to be added to the line.</p>
    <p>The format for the <code>actionData</code> portion of the <code>ActionSubrecord</code> for this actionType is as follows:</p>
    <table border="1" cellspacing="2" cellpadding="0">
      <tr align="left" valign="middle">
        <th>
          <div align="left">
            Type
          </div>
        </th>
        <th>
          <div align="left">
            Name
          </div>
        </th>
        <th align="left">
          <div align="left">
            Description
          </div>
        </th>
      </tr>
      <tr align="left" valign="middle">
        <td>fixed</td>
        <td>substThreshold</td>
        <td class="description">Distance growth factor (in ems) at which this glyph is replaced and the growth factor recalculated.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>UInt16</td>
        <td>addGlyph</td>
        <td class="description">Glyph to be added as kashida. If this value is 0xFFFF, no extra glyph will be added. Note that generally when a glyph is added, justification will need to be redone.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>UInt16</td>
        <td>substGlyph</td>
        <td class="description">Glyph to be substituted for this glyph if the growth factor equals or exceeds the value of substThreshold.</td>
      </tr>
    </table>
    <h4>Stretch Glyph Action</h4>
    <p>An <code>actionType</code> 3 is a stretch glyph action. No extra glyph is inserted; rather, a stretch factor is applied to an existing glyph instead of adding whitespace to it. For example, you could point to a hyphen as being a glyph that could stretch to take up all the white space in a line of text.</p>
    <p>There is no <code>actionData</code> portion of the <code>ActionSubrecord</code> for <code>actionType</code> of 3; no data should be present.</p>
    <p> <em>Stretch glyph actions are not supported in CoreText. Their use should be avoided.</em> </p>
    <h4>Ductile Glyph Action</h4>
    <p>An <code>actionType</code> of 4 is a ductile glyph action. This causes the actual shape of the glyph to change by the use of a font variations mechanism. The <code>actionData</code> portion of the <code>ActionSubrecord</code> for actionType 4 is as follows:</p>
    <table border="1" cellspacing="2" cellpadding="0">
      <tr align="left" valign="middle">
        <th>
          <div align="left">
            Type
          </div>
        </th>
        <th>
          <div align="left">
            Name
          </div>
        </th>
        <th align="left">
          <div align="left">
            Description
          </div>
        </th>
      </tr>
      <tr align="left" valign="middle">
        <td>UInt32</td>
        <td>variationAxis</td>
        <td class="description">The 4-byte tag identifying the ductile axis. This would normally be 0x64756374 ('duct'), but you may use any axis the font contains.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>Fixed</td>
        <td>minimumLimit</td>
        <td class="description">The lowest value for the ductility axis that still yields an acceptable appearance. Normally this will be 1.0.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>Fixed</td>
        <td>noStretchValue</td>
        <td class="description">This is the default value that corresponds to no change in appearance. Normally, this will be 1.0.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>Fixed</td>
        <td>maximumLimit</td>
        <td class="description">The highest value for the ductility axis that still yields an acceptable appearance.</td>
      </tr>
    </table>
    <p> <em>Ductile glyph actions are not supported in CoreText. Their use should be avoided.</em> </p>
    <h4>Repeated Add Glyph Action</h4>
    <p>If the advance width of a glyph is growing, then a specified single glyph—such as a simple horizontal kashida—is added after this glyph. If necessary, it is added more than once in order to fill the gap.</p>
    <p>The <code>actionData</code> portion of the <code>ActionSubrecord</code> has the following format for <code>actionType</code> value of 5:</p>
    <table border="1" cellspacing="2" cellpadding="0">
      <tr align="left" valign="middle">
        <th>
          <div align="left">
            Type
          </div>
        </th>
        <th>
          <div align="left">
            Name
          </div>
        </th>
        <th align="left">
          <div align="left">
            Description
          </div>
        </th>
      </tr>
      <tr align="left" valign="middle">
        <td>UInt16</td>
        <td>flags</td>
        <td class="description">Currently unused; set to 0.</td>
      </tr>
      <tr>
        <td>UInt16</td>
        <td>glyph</td>
        <td class="description">Glyph that should be added if the distance factor is growing.</td>
      </tr>
    </table>
    <h2>Justification Table Examples</h2>
    <h3>Example: Simple Justification Table</h3>
    <p>Consider a simple example of a Roman font containing the usual repertoire of glyphs. In this example, there is a set of justification factors for the space character, and a different set of factors for other characters. This is not a cursive font, so there are no glyphs of kashida priority. Also, no glyphs are handled specially, so the only justification category used is zero. For purposes of this example, imagine that glyph 2 is the space glyph, and glyphs 3 through 275 constitute the non-whitespace glyphs in the font. There is no postcompensation subtable in this justification table.</p>
    <p>The justification table for this example font is as follows:</p>
    <table border="1" cellspacing="2" cellpadding="0">
      <tr align="left" valign="middle">
        <th>
          <div align="left">
            Offset/<br>
            length
          </div>
        </th>
        <th>
          <div align="left">
            Value
          </div>
        </th>
        <th>
          <div align="left">
            Name
          </div>
        </th>
        <th align="left">
          <div align="left">
            Comment
          </div>
        </th>
      </tr>
      <tr align="left" valign="middle">
        <td>0/4</td>
        <td>0x00010000</td>
        <td>version</td>
        <td class="description">Version number of the justification table in fixed- point format. Version is 1.0.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>4/2</td>
        <td>0</td>
        <td>format</td>
        <td class="description">The justification table format.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>6/2</td>
        <td>10</td>
        <td>horizOffset</td>
        <td class="description">Byte offset to start of horizontal JustificationHeader subtable.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>8/2</td>
        <td>0</td>
        <td>vertOffset</td>
        <td class="description">Byte offset to start of vertical JustificationHeader subtable. A value of 0 means there is no vertical subtable.</td>
      </tr>
      <tr align="left" valign="middle">
        <td colspan="4" class="description">(The horizontal <code>JustificationHeader</code> starts here)</td>
      </tr>
      <tr align="left" valign="middle">
        <td>10/2</td>
        <td>0</td>
        <td>justClassTableOffset</td>
        <td class="description">Byte offset to the justification category state table. A value of 0 means that every glyph has a justClass value of zero.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>12/2</td>
        <td>48</td>
        <td>wdcTableOffset</td>
        <td class="description">Byte offset to start of width delta clusters.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>14/2</td>
        <td>0</td>
        <td>pcTableOffset</td>
        <td class="description">Byte offset to the start of postcompensation subtable. A value of 0 means there is no postcompensation subtable.</td>
      </tr>
      <tr align="left" valign="middle">
        <td colspan="4" class="description">(The lookup table starts here)</td>
      </tr>
      <tr align="left" valign="middle">
        <td>16/2</td>
        <td>2</td>
        <td>format</td>
        <td class="description">Lookup table format 2 (segment single table format).</td>
      </tr>
      <tr align="left" valign="middle">
        <td colspan="4" class="description">(The next 5 fields are the <code>BinSrchHeader</code>)</td>
      </tr>
      <tr align="left" valign="middle">
        <td>18/2</td>
        <td>6</td>
        <td>unitSize</td>
        <td class="description">Size of a LookupSegment record (2 bytes for the starting glyph index, 2 bytes for the ending glyph index, and 2 bytes for the offset to the width delta cluster record).</td>
      </tr>
      <tr align="left" valign="middle">
        <td>20/2</td>
        <td>2</td>
        <td>nUnits</td>
        <td class="description">Number of units of the preceding size to be searched.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>22/2</td>
        <td>12</td>
        <td>searchRange</td>
        <td class="description">The unitSize times the largest power of two that is less than or equal to nUnits.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>24/2</td>
        <td>1</td>
        <td>entrySelector</td>
        <td class="description">The log base 2 of the largest power of two less than or equal to nUnits.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>26/2</td>
        <td>0</td>
        <td>rangeShift</td>
        <td class="description">The unitSize times the difference of nUnits minus the largest power of two less than or equal to nUnits.</td>
      </tr>
      <tr align="left" valign="middle">
        <td colspan="4" class="description">(The first <code>LookupSegment</code> starts here)</td>
      </tr>
      <tr align="left" valign="middle">
        <td>28/2</td>
        <td>2</td>
        <td>lastGlyph</td>
        <td class="description">Ending glyph index in this first segment (space glyph).</td>
      </tr>
      <tr align="left" valign="middle">
        <td>30/2</td>
        <td>2</td>
        <td>firstGlyph</td>
        <td class="description">Starting glyph index in this segment (space glyph).</td>
      </tr>
      <tr align="left" valign="middle">
        <td>32/2</td>
        <td>0</td>
        <td>value</td>
        <td class="description">Byte offset from start of the table of WidthDeltaClusters records (offset 48) to the first WidthDeltaCluster record (also offset 48).</td>
      </tr>
      <tr align="left" valign="middle">
        <td colspan="4" class="description">(The second <code>LookupSegment</code> starts here)</td>
      </tr>
      <tr align="left" valign="middle">
        <td>34/2</td>
        <td>275</td>
        <td>lastGlyph</td>
        <td class="description">Ending glyph index in this second segment (non- whitespace).</td>
      </tr>
      <tr align="left" valign="middle">
        <td>36/2</td>
        <td>3</td>
        <td>firstGlyph</td>
        <td class="description">Starting glyph index in this second segment (non- whitespace).</td>
      </tr>
      <tr align="left" valign="middle">
        <td>38/2</td>
        <td>28</td>
        <td>value</td>
        <td class="description">Offset in bytes from the start of the table of WidthDeltaClusters records (offset 48) to the second WidthDeltaCluster record (offset 76).</td>
      </tr>
      <tr align="left" valign="middle">
        <td colspan="4" class="description">(The last <code>LookupSegment</code> starts here)</td>
      </tr>
      <tr align="left" valign="middle">
        <td>40/2</td>
        <td>0xFFFF</td>
        <td>lastGlyph</td>
        <td class="description">Special value for the last glyph in the last lookup segment.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>42/2</td>
        <td>0xFFFF</td>
        <td>firstGlyph</td>
        <td class="description">Special value for the first glyph in the last lookup segment.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>44/2</td>
        <td>0</td>
        <td>value</td>
        <td class="description">Byte offset from start of the table of WidthDeltaClusters records to this specific WidthDeltaCluster record.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>46/2</td>
        <td>0</td>
        <td>padding</td>
        <td class="description">Padding to guarantee that the WidthDeltaCluster table that follows this field starts on a longword boundary (multiple of 4).</td>
      </tr>
      <tr align="left" valign="middle">
        <td colspan="4" class="description">(<code>WidthDeltaCluster</code> records start here)</td>
      </tr>
      <tr align="left" valign="middle">
        <td>48/4</td>
        <td>1</td>
        <td>count</td>
        <td class="description">Number of justification categoryes and JustWidthDeltaEntry pairs that follow.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>52/4</td>
        <td>0</td>
        <td>justClass</td>
        <td class="description">The justification category is zero.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>56/4</td>
        <td>0x00008000</td>
        <td>beforeGrowLimit</td>
        <td class="description">The maximum number of ems that the glyph can grow on the left side is one-half em.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>60/4</td>
        <td>0xFFFFF500</td>
        <td>beforeShrinklimit</td>
        <td class="description">The number of ems that the glyph can shrink on the left side is roughly -0.043 em.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>64/4</td>
        <td>0x00008000</td>
        <td>afterGrowLimit</td>
        <td class="description">The maximum number of ems that the glyph can grow on the right side is one-half em.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>68/4</td>
        <td>0xFFFFF500</td>
        <td>afterShrinkLimit</td>
        <td class="description">The number of ems that the glyph can shrink on the right side is roughly -0.043 em.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>72/2</td>
        <td>0x0001</td>
        <td>growFlags</td>
        <td class="description">Whitespace priority.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>74/2</td>
        <td>0x0001</td>
        <td>shrinkFlags</td>
        <td class="description">Whitespace priority.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>76/4</td>
        <td>1</td>
        <td>count</td>
        <td class="description">Number of justification categoryes and JustWidthDeltaEntry pairs that follow.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>80/4</td>
        <td>0</td>
        <td>justClass</td>
        <td class="description">The justification category is zero.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>84/4</td>
        <td>0x00002500</td>
        <td>beforeGrowLimit</td>
        <td class="description">The maximum number of ems that the glyph can grow on the left side is roughly 0.14 em.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>88/4</td>
        <td>0xFFFFF500</td>
        <td>beforeShrinklimit</td>
        <td class="description">The number of ems that the glyph can shrink on the left side is roughly -0.043 em.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>92/4</td>
        <td>0x00002500</td>
        <td>afterGrowLimit</td>
        <td class="description">The maximum number of ems that the glyph can grow on the right side is roughly 0.14 em.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>96/4</td>
        <td>0xFFFFF500</td>
        <td>afterShrinkLimit</td>
        <td class="description">The number of ems that the glyph can shrink on the right side is roughly -0.043 em.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>100/2</td>
        <td>0x0002</td>
        <td>growFlags</td>
        <td class="description">Inter-character priority.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>102/2</td>
        <td>0x0002</td>
        <td>shrinkFlags</td>
        <td class="description">Inter-character priority.</td>
      </tr>
    </table>
    <h3>Example: Complex Justification Table (with Postcompensation and justification category State Tables)</h3>
    <p>A more complex example is an Arabic font to which you want to add kashida capabilities. The kashida glyph that is used in this example is glyph number 226. This example also uses the following glyph assignments: 2 is whitespace, 3 to 225 are regular glyphs, and 226 is the kashida. For simplicity, this font uses a state table that assigns justification category 1 to the first glyph in each word (which, in this example, is actually the glyph on the left hand side of the word, instead of the right hand side), and justification category 0 to all other glyphs.</p>
    <p>The lookup table for the postcompensation subtable doesn't need to list each separate glyph to which a kashida might be attached. By matching all glyphs, you can rely on the <code>justClass</code> value to filter out only those glyphs that the kashida action will affect.</p>
    <p>Remember: the action occurs in three different places here:</p>
    <ol>
      <li>The kashida-capable glyph is contextually identified by the justification category table.</li>
      <li>The actual advance width stretch factors are specified as unlimited for the glyph with the kashida.</li>
      <li>Given these unlimited advance width growth factors, the postcompensation subtable catches these glyphs and adds kashidas of the appropriate width.</li>
    </ol>
    <p>The following figure shows the justification table finite state machine for this example font. There are four states. They are 'start of text', 'start of line', 'saw a letter' and 'saw a space' states. Note that when the finite state machine is in the 'start of text', 'start of line', or 'saw a space' state and encounters a letter (assigned glyph Class 4), the glyph is converted to a glyph having justification category 1.</p>
    <p><img src="FF80.gif" width="500" height="363" align="bottom"></p>
    <p>The next figure shows the justification state table for this example font. The four states (rows) and five classes (columns) are shown. Each cell of the array contains the action (top) and the next state (bottom). The next state is bounded by brackets.</p>
    <p><img src="FF79.gif" width="475" height="307" align="bottom"></p>
    <p>Note that the 'start of text,' 'start of line,' and 'saw a space' states are identical, since there is no distinction between these three states for this font. The following table summarizes the classes, class names, entry numbers, next states, and actions for these three states.</p>
    <table border="1" cellspacing="2" cellpadding="0">
      <tr align="left" valign="middle">
        <th>
          <div align="left">
            Class
          </div>
        </th>
        <th>
          <div align="left">
            Class<br>
            Name
          </div>
        </th>
        <th>
          <div align="left">
            Entry<br>
            Number
          </div>
        </th>
        <th>
          <div align="left">
            Next<br>
            State
          </div>
        </th>
        <th align="left">
          <div align="left">
            Action
          </div>
        </th>
      </tr>
      <tr align="left" valign="middle">
        <td>0</td>
        <td>End of Text</td>
        <td>1</td>
        <td>Saw a letter</td>
        <td class="description">No action.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>1</td>
        <td>Out of Bounds</td>
        <td>2</td>
        <td>Saw a space</td>
        <td class="description">No action.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>2</td>
        <td>Deleted Glyph</td>
        <td>1</td>
        <td>Saw a letter</td>
        <td class="description">No action.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>3</td>
        <td>End of Line</td>
        <td>1</td>
        <td>Saw a letter</td>
        <td class="description">No action.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>4</td>
        <td>Letter</td>
        <td>0</td>
        <td>Saw a letter</td>
        <td class="description">Current glyph is justification category 1.</td>
      </tr>
    </table>
    <p>The following table lists the classes, class names, entry numbers, next states, and actions for the 'saw a letter' state.</p>
    <table border="1" cellspacing="2" cellpadding="0">
      <tr align="left" valign="middle">
        <th>
          <div align="left">
            Class
          </div>
        </th>
        <th>
          <div align="left">
            Class<br>
            Name
          </div>
        </th>
        <th>
          <div align="left">
            Entry<br>
            Number
          </div>
        </th>
        <th>
          <div align="left">
            Next<br>
            State
          </div>
        </th>
        <th align="left">
          <div align="left">
            Action
          </div>
        </th>
      </tr>
      <tr align="left" valign="middle">
        <td>0</td>
        <td>End of Text</td>
        <td>1</td>
        <td>Saw a letter</td>
        <td class="description">No action.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>1</td>
        <td>Out of Bounds</td>
        <td>2</td>
        <td>Saw a space</td>
        <td class="description">No action.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>2</td>
        <td>Deleted Glyph</td>
        <td>1</td>
        <td>Saw a letter</td>
        <td class="description">No action.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>3</td>
        <td>End of Line</td>
        <td>1</td>
        <td>Saw a letter</td>
        <td class="description">No action.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>4</td>
        <td>Letter</td>
        <td>1</td>
        <td>Saw a letter</td>
        <td class="description">No action.</td>
      </tr>
    </table>
    <p>Here is the justification table (which is 444 bytes long) for this example font:</p>
    <table border="1" cellspacing="2" cellpadding="0">
      <tr align="left" valign="middle">
        <th>
          <div align="left">
            Offset/length
          </div>
        </th>
        <th>
          <div align="left">
            Value
          </div>
        </th>
        <th>
          <div align="left">
            Name
          </div>
        </th>
        <th align="left">
          <div align="left">
            Comment
          </div>
        </th>
      </tr>
      <tr align="left" valign="middle">
        <td>0/4</td>
        <td>0x00010000</td>
        <td>version</td>
        <td class="description">Version number of the justification table, in fixed- point format</td>
      </tr>
      <tr align="left" valign="middle">
        <td>4/2</td>
        <td>0</td>
        <td>format</td>
        <td class="description">The justification table format value.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>6/2</td>
        <td>10</td>
        <td>horizOffset</td>
        <td class="description">Byte offset to start of the horizontal JustificationHeader subtable</td>
      </tr>
      <tr align="left" valign="middle">
        <td>8/2</td>
        <td>0</td>
        <td>vertOffset</td>
        <td class="description">Byte offset to start of the vertical JustificationHeader subtable. A value of 0 means there is no vertical subtable.</td>
      </tr>
      <tr align="left" valign="middle">
        <td colspan="4" class="description">(The horizontal JustificationHeader subtable starts here)</td>
      </tr>
      <tr align="left" valign="middle">
        <td>10/2</td>
        <td>168</td>
        <td>justClassTableOffset</td>
        <td class="description">Byte offset from start of the 'just' table to the start of the class state table.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>12/2</td>
        <td>48</td>
        <td>wdcTableOffset</td>
        <td class="description">Byte offset from start of the 'just' table to the start of the width delta clusters table.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>14/2</td>
        <td>128</td>
        <td>pcTableOffset</td>
        <td class="description">Byte offset from start of the 'just' table to the start of the postcompensation table.</td>
      </tr>
      <tr align="left" valign="middle">
        <td colspan="4" class="description">(The lookup table mapping glyphs to <code>WidthDeltaCluster</code> table offsets starts here)</td>
      </tr>
      <tr align="left" valign="middle">
        <td>16/2</td>
        <td>2</td>
        <td>format</td>
        <td class="description">Lookup table format 2 (segment single format).</td>
      </tr>
      <tr align="left" valign="middle">
        <td>18/2</td>
        <td>6</td>
        <td>unitSize</td>
        <td class="description">Size of a LookupSegment record (2 bytes for the starting glyph index, 2 bytes for the ending glyph index, and 2 bytes for the offset to the width delta cluster record).</td>
      </tr>
      <tr align="left" valign="middle">
        <td>20/2</td>
        <td>2</td>
        <td>nUnits</td>
        <td class="description">Number of units in the lookup table (one for whitespace, and one for both kashida and intercharacter glyphs, which are only distringuished by their justification category values).</td>
      </tr>
      <tr align="left" valign="middle">
        <td>22/2</td>
        <td>12</td>
        <td>searchRange</td>
        <td class="description">The unitSize times the largest power of two that is less than or equal to nUnits.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>24/2</td>
        <td>1</td>
        <td>entrySelector</td>
        <td class="description">The log (base 2) of the largest power of two that is less than or equal to nUnits.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>26/2</td>
        <td>0</td>
        <td>rangeShift</td>
        <td class="description">The unitSize times the difference of nUnits minus the largest power of two that is less than or equal to nUnits.</td>
      </tr>
      <tr align="left" valign="middle">
        <td colspan="4" class="description">(The first <code>LookupSegment</code> starts here)</td>
      </tr>
      <tr align="left" valign="middle">
        <td>28/2</td>
        <td>2</td>
        <td>lastGlyph</td>
        <td class="description">Ending glyph index in this segment (index of the space glyph).</td>
      </tr>
      <tr align="left" valign="middle">
        <td>30/2</td>
        <td>2</td>
        <td>firstGlyph</td>
        <td class="description">Starting glyph index in this segment (index of the space glyph).</td>
      </tr>
      <tr align="left" valign="middle">
        <td>32/2</td>
        <td>0</td>
        <td>value</td>
        <td class="description">Offset from start of WidthDeltaClusters table to the cluster for this range of glyphs (i.e. the space glyph).</td>
      </tr>
      <tr align="left" valign="middle">
        <td colspan="4" class="description">(The second <code>LookupSegment</code> starts here)</td>
      </tr>
      <tr align="left" valign="middle">
        <td>34/2</td>
        <td>226</td>
        <td>lastGlyph</td>
        <td class="description">Ending glyph index in this segment.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>36/2</td>
        <td>3</td>
        <td>firstGlyph</td>
        <td class="description">Starting glyph index in this segment.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>38/2</td>
        <td>28</td>
        <td>value</td>
        <td class="description">Offset from start of WidthDeltaClusters table to the cluster for this range of glyphs (i.e. all the other glyphs).</td>
      </tr>
      <tr align="left" valign="middle">
        <td colspan="4" class="description">(Special guardian <code>LookupSegment</code> always goes last)</td>
      </tr>
      <tr align="left" valign="middle">
        <td>40/2</td>
        <td>0xFFFF</td>
        <td>lastGlyph</td>
        <td class="description">Special guardian.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>42/2</td>
        <td>0xFFFF</td>
        <td>firstGlyph</td>
        <td class="description">Special guardian.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>44/2</td>
        <td>0</td>
        <td>value</td>
        <td class="description">Special guardian.</td>
      </tr>
      <tr align="left" valign="middle">
        <td colspan="4" class="description">(Pad to longword, since all subtables in the <code>'just'</code> table must always be longword aligned)</td>
      </tr>
      <tr align="left" valign="middle">
        <td>46/2</td>
        <td>0</td>
        <td>(none)</td>
        <td class="description">Padding.</td>
      </tr>
      <tr align="left" valign="middle">
        <td colspan="4" class="description">(The first cluster of the <code>WidthDeltaClusters</code> table starts here)</td>
      </tr>
      <tr align="left" valign="middle">
        <td>48/4</td>
        <td>1</td>
        <td>count</td>
        <td class="description">Number of &lt;justification category, JustWidthDeltaEntry&gt; pairs contained in this cluster.</td>
      </tr>
      <tr align="left" valign="middle">
        <td colspan="4" class="description">(The first pair of the first cluster starts here)</td>
      </tr>
      <tr align="left" valign="middle">
        <td>52/4</td>
        <td>0</td>
        <td>justClass</td>
        <td class="description">Use this pair for justClass 0.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>56/4</td>
        <td>0x00008000</td>
        <td>beforeGrowLimit</td>
        <td class="description">The most by which a glyph can grow on the left-hand side is 0.5 em.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>60/4</td>
        <td>0xFFFFF500</td>
        <td>beforeShrinkLimit</td>
        <td class="description">The most by which a glyph can shrink on the left-hand side is roughly 0.043 em. Note that shrink factors are always negative.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>64/4</td>
        <td>0x00008000</td>
        <td>afterGrowLimit</td>
        <td class="description">The most by which a glyph can grow on the right-hand side is 0.5 em.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>68/4</td>
        <td>0xFFFFF500</td>
        <td>afterShrinkLimit</td>
        <td class="description">The most by which a glyph can shrink on the right-hand side is roughly 0.043 em. Note that shrink factors are always negative.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>72/2</td>
        <td>0x0001</td>
        <td>growFlags</td>
        <td class="description">Grow-case priority is whitespace, with no other flags set.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>74/2</td>
        <td>0x0001</td>
        <td>shrinkFlags</td>
        <td class="description">Shrink-case priority is whitespace, with no other flags set.</td>
      </tr>
      <tr align="left" valign="middle">
        <td colspan="4" class="description">(The second cluster of the <code>WidthDeltaClusters</code> table starts here)</td>
      </tr>
      <tr align="left" valign="middle">
        <td>76/4</td>
        <td>2</td>
        <td>count</td>
        <td class="description">Number of &lt;justification category, JustWidthDeltaEntry&gt; pairs contained in this cluster.</td>
      </tr>
      <tr align="left" valign="middle">
        <td colspan="4" class="description">(The first pair of the second cluster starts here)</td>
      </tr>
      <tr align="left" valign="middle">
        <td>80/4</td>
        <td>0</td>
        <td>justClass</td>
        <td class="description">Use this pair for justClass 0.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>84/4</td>
        <td>0x00002500</td>
        <td>beforeGrowLimit</td>
        <td class="description">The most by which a glyph can grow on the left-hand side is roughly 0.14 em.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>88/4</td>
        <td>0xFFFFF500</td>
        <td>beforeShrinklimit</td>
        <td class="description">The most by which a glyph can shrink on the left-hand side is roughly 0.043 em. Note that shrink factors are always negative.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>92/4</td>
        <td>0x00002500</td>
        <td>afterGrowLimit</td>
        <td class="description">The most by which a glyph can grow on the right-hand side is roughly 0.14 em.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>96/4</td>
        <td>0xFFFFF500</td>
        <td>afterShrinkLimit</td>
        <td class="description">The most by which a glyph can shrink on the right-hand side is roughly 0.043 em. Note that shrink factors are always negative.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>100/2</td>
        <td>0x0002</td>
        <td>growFlags</td>
        <td class="description">Grow-case priority is intercharacter, with no other flags set.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>102/2</td>
        <td>0x0002</td>
        <td>shrinkFlags</td>
        <td class="description">Grow-case priority is intercharacter, with no other flags set.</td>
      </tr>
      <tr align="left" valign="middle">
        <td colspan="4" class="description">(The second pair of the second cluster starts here)</td>
      </tr>
      <tr align="left" valign="middle">
        <td>104/4</td>
        <td>1</td>
        <td>justClass</td>
        <td class="description">Use this pair for justClass 1.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>108/4</td>
        <td>0x00002500</td>
        <td>beforeGrowLimit</td>
        <td class="description">The most by which a glyph can grow on the left-hand side is roughly 0.14 em.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>112/4</td>
        <td>0xFFFFF500</td>
        <td>beforeShrinklimit</td>
        <td class="description">The most by which a glyph can shrink on the left-hand side is roughly 0.043 em. Note that shrink factors are always negative.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>116/4</td>
        <td>0x00002500</td>
        <td>afterGrowLimit</td>
        <td class="description">The most by which a glyph can grow on the right-hand side is roughly 0.14 em.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>120/4</td>
        <td>0xFFFFF500</td>
        <td>afterShrinkLimit</td>
        <td class="description">The most by which a glyph can shrink on the right-hand side is roughly 0.043 em. Note that shrink factors are always negative.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>124/2</td>
        <td>0x1000</td>
        <td>growFlags</td>
        <td class="description">Grow-case priority is kashida, and the unlimited flag is set.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>126/2</td>
        <td>0x0002</td>
        <td>shrinkFlags</td>
        <td class="description">Grow-case priority is intercharacter, with no other flags set.</td>
      </tr>
      <tr align="left" valign="middle">
        <td colspan="4" class="description">(The postcompensation subtable starts here with the lookup table.<br>
        Note that we're already longword aligned, so no padding is needed)</td>
      </tr>
      <tr align="left" valign="middle">
        <td>128/2</td>
        <td>2</td>
        <td>format</td>
        <td class="description">Lookup table format 2 (segment single format).</td>
      </tr>
      <tr align="left" valign="middle">
        <td>130/2</td>
        <td>6</td>
        <td>unitSize</td>
        <td class="description">Size of a LookupSegment record (2 bytes for the starting glyph index, 2 bytes for the ending glyph index, and 2 bytes for the offset to the PostcompensationAction record).</td>
      </tr>
      <tr align="left" valign="middle">
        <td>132/2</td>
        <td>1</td>
        <td>nUnits</td>
        <td class="description">Number of units of the preceding size to be searched.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>134/2</td>
        <td>6</td>
        <td>searchRange</td>
        <td class="description">The unitSize times the largest power of two that is less than or equal to nUnits.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>136/2</td>
        <td>0</td>
        <td>entrySelector</td>
        <td class="description">The log base 2 of the largest power of two less than or equal to nUnits.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>138/2</td>
        <td>0</td>
        <td>rangeShift</td>
        <td class="description">The unitSize times the difference of nUnits minus the largest power of two less than or equal to nUnits.</td>
      </tr>
      <tr align="left" valign="middle">
        <td colspan="4" class="description">(The only <code>LookupSegment</code> starts here)</td>
      </tr>
      <tr align="left" valign="middle">
        <td>140/2</td>
        <td>226</td>
        <td>lastGlyph</td>
        <td class="description">Ending glyph index in this first segment (non-whitespace glyphs).</td>
      </tr>
      <tr align="left" valign="middle">
        <td>142/2</td>
        <td>2</td>
        <td>firstGlyph</td>
        <td class="description">Starting glyph index in this first segment (non-whitespace glyphs).</td>
      </tr>
      <tr align="left" valign="middle">
        <td>144/2</td>
        <td>24</td>
        <td>value</td>
        <td class="description">Byte offset from start of the postcompensation table (offset 128) to the postcompensation action record for glyphs 2 through 226 (offset 152).</td>
      </tr>
      <tr align="left" valign="middle">
        <td colspan="4" class="description">(Special guardian <code>LookupSegment</code> always goes last)</td>
      </tr>
      <tr align="left" valign="middle">
        <td>146/2</td>
        <td>0xFFFF</td>
        <td>lastGlyph</td>
        <td class="description">Special guardian.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>148/2</td>
        <td>0xFFFF</td>
        <td>firstGlyph</td>
        <td class="description">Special guardian.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>150/2</td>
        <td>0</td>
        <td>value</td>
        <td class="description">Special guardian.</td>
      </tr>
      <tr align="left" valign="middle">
        <td colspan="4" class="description">(The <code>PostcompensationAction</code> record starts here)</td>
      </tr>
      <tr align="left" valign="middle">
        <td>152/4</td>
        <td>1</td>
        <td>actionCount</td>
        <td class="description">Number of ActionSubrecords that follow.</td>
      </tr>
      <tr align="left" valign="middle">
        <td colspan="4" class="description">(The <code>ActionSubrecord</code> starts here)</td>
      </tr>
      <tr align="left" valign="middle">
        <td>156/2</td>
        <td>1</td>
        <td>actionClass</td>
        <td class="description">The JustClass value associated with the following ActionSubrecord.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>158/2</td>
        <td>1</td>
        <td>actionType</td>
        <td class="description">The actionType is unconditional add glyph.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>160/4</td>
        <td>12</td>
        <td>actionLength</td>
        <td class="description">Length of this ActionSubrecord.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>164/2</td>
        <td>226</td>
        <td>actionData</td>
        <td class="description">The glyph to be added is the kashida glyph.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>166/2</td>
        <td>0</td>
        <td>padding</td>
        <td class="description">Padding to guarantee longword alignment (must be a multiple of 4).</td>
      </tr>
      <tr align="left" valign="middle">
        <td colspan="4" class="description">(The justification category state table starts here with the metamorphosis subtable header)</td>
      </tr>
      <tr align="left" valign="middle">
        <td>168/2</td>
        <td>276</td>
        <td>length</td>
        <td class="description">Length of this justification category state table (including this metamorphosis subtable header).</td>
      </tr>
      <tr align="left" valign="middle">
        <td>170/2</td>
        <td>0</td>
        <td>coverage</td>
        <td class="description">Process glyphs in ascending order. The 0x4000 bit is the only one interpreted for the justification table.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>172/4</td>
        <td>0</td>
        <td>subFeatureFlags</td>
        <td class="description">Ignored for justification tables.</td>
      </tr>
      <tr align="left" valign="middle">
        <td colspan="4" class="description">(The <code>StateHeader</code> starts here)</td>
      </tr>
      <tr align="left" valign="middle">
        <td>176/2</td>
        <td>5</td>
        <td>stateSize</td>
        <td class="description">This reflects the four fixed classes (end of text, out of bounds and deleted glyph, and end of line) and one that we're adding (letter).</td>
      </tr>
      <tr align="left" valign="middle">
        <td>178/2</td>
        <td>8</td>
        <td>classTable</td>
        <td class="description">Byte offset from the start of the state table header to the class table.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>180/2</td>
        <td>236</td>
        <td>stateArray</td>
        <td class="description">Byte offset from the start of the state table header to the state array.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>182/2</td>
        <td>256</td>
        <td>entryTable</td>
        <td class="description">Byte offset from the start of the state table header to the entry table.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>184/2</td>
        <td>3</td>
        <td>firstGlyph</td>
        <td class="description">Glyph index of the first glyph in the class table.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>186/2</td>
        <td>223</td>
        <td>nGlyphs</td>
        <td class="description">Count (takes us up through glyph 225).</td>
      </tr>
      <tr align="left" valign="middle">
        <td>188/223</td>
        <td>0x040404...</td>
        <td>classarray[]</td>
        <td class="description">223 bytes each containing the value 4. This is the class for letters. Note that the whitespace glyph is not included in the range; that means it will get class 1. Class 1 is 'out of bounds.'</td>
      </tr>
      <tr align="left" valign="middle">
        <td>411/1</td>
        <td>0x00</td>
        <td>padding</td>
        <td class="description">Padding to guarantee longword alignment (must be a multiple of 4).</td>
      </tr>
      <tr align="left" valign="middle">
        <td>412/5</td>
        <td>1,2,1,1,0</td>
        <td>state</td>
        <td class="description">0 'Start of text' state. For classes 'end of text,' 'deleted glyph,' and 'end of line' use entry #1. For class 'letter,' use entry #0. For class 'out of bounds' (i. e. space), use entry #2.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>417/5</td>
        <td>1,2,1,1,0</td>
        <td>state</td>
        <td class="description">1 'Start of line' state. Same as 'start of text' state.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>422/5</td>
        <td>1,2,1,1,1</td>
        <td>state</td>
        <td class="description">2 'Saw a letter' state. For all classes except 'out of bounds,' use entry #1. For class 'out of bounds' use entry #2.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>427/5</td>
        <td>1,2,1,1,0</td>
        <td>state</td>
        <td class="description">3 'Saw a space' state. Same effect as 'start of text' state.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>432/2</td>
        <td>246</td>
        <td>entry</td>
        <td class="description">Offset to 'saw a letter' state.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>434/2</td>
        <td>0x0001</td>
        <td>action</td>
        <td class="description">Action is to set justification category of current glyph to 1.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>436/2</td>
        <td>246</td>
        <td>entry</td>
        <td class="description">Offset to 'saw a letter' state.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>438/2</td>
        <td>0</td>
        <td>action</td>
        <td class="description">No action is taken.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>440/2</td>
        <td>251</td>
        <td>entry</td>
        <td class="description">Offset to 'saw a letter' state.</td>
      </tr>
      <tr align="left" valign="middle">
        <td>442/2</td>
        <td>0</td>
        <td>action</td>
        <td class="description">No action is taken.</td>
      </tr>
    </table>
  </div>

      </section>
  </div><!-- /content -->

  <div id="globalfooter">
    <div id="breadory">
      <ol id="breadcrumbs">
        <li class="home"><a href="../../../index.html">Developer</a></li>
        <li><a href="../../index.html">Fonts</a></li>
        <li><a href="../index.html">TrueType™ Reference Manual</a></li>
        <li>The TrueType Font File</li>
      </ol>
      <div id="directorynav" class="directorynav">
	<div id="dn-cola" class="column">
		<h3><a href="../../../platforms/index.html">Platforms</a></h3>
		<ul>
			<li><a href="../../../ios/index.html">iOS</a></li>
			<li><a href="../../../osx/index.html">OS X</a></li>
			<li><a href="../../../watchos/index.html">watchOS</a></li>
			<li><a href="../../../tvos/index.html">tvOS</a></li>
		</ul>
		<h3><a href="../../../resources/index.html">Tools</a></h3>
		<ul>
			<li><a href="../../../xcode/index.html">Xcode</a></li>
			<li><a href="../../../swift/index.html">Swift</a></li>
		</ul>
	</div>
	<div id="dn-colb" class="column">
		<h3><a href="../../../resources/index.html">Resources</a></h3>
		<ul>
			<li><a href="../../../library/index.html">Documentation</a></li>
			<li><a href="../../../videos/index.html">Videos</a></li>
			<li><a href="https://forums.developer.apple.com/">Forums</a></li>
			<li><a href="../../../app-store/index.html">App Store</a></li>
			<li><a href="../../../safari/index.html">Safari and Web</a></li>
			<li><a href="../../../education/index.html">Education</a></li>
			<li><a href="../../../enterprise/index.html">Enterprise</a></li>
		</ul>
	</div>
	<div id="dn-colc" class="column">
		<h3><a href="../../../programs/index.html">Programs</a></h3>
		<ul>
			<li><a href="../../../programs/index.html">Developer Program</a></li>
			<li><a href="../../../programs/enterprise/index.html">Enterprise Program</a></li>
			<li><a href="../../../programs/ios/university/index.html">iOS University Program</a></li>
			<li><a href="../../../programs/mfi/index.html">MFi Program</a></li>
		</ul>
	</div>
	<div id="dn-cold" class="column">
		<h3><a href="../../../support/index.html">Support</a></h3>
		<ul>
			<li><a href="../../../support/development/index.html">Development</a></li>
			<li><a href="../../../support/distribution/index.html">Distribution</a></li>
			<li><a href="../../../support/membership/index.html">Membership</a></li>
			<li><a href="../../../system-status/index.html">System Status</a></li>
		</ul>
	</div>
	<div id="dn-cole" class="column">
		<h3><a href="https://developer.apple.com/account/">Account</a></h3>
		<ul>
			<li><a href="https://developer.apple.com/account/">Developer Account</a></li>
			<li><a href="../../../go/index-id=certificates-ids-profiles.html">Certificates, IDs &amp; Profiles</a></li>
			<li><a href="https://itunesconnect.apple.com">iTunes Connect</a></li>			
			<li><a href="../../../terms/index.html">License Agreements</a></li>
		</ul>
	</div>
</div>

    </div><!--/breadory-->
    <ul class="gf-links piped footer-links">
  <li><a href="../../../news/index.html" class="first">News &amp; Updates</a></li>
  <li><a href="../../../bug-reporting/index.html">Report Bugs</a></li>
  <li><a href="../../../contact/index.html">Contact Us</a></li>
</ul>

<div class="gf-sosumi footer-sosumi">
  <p>Copyright © 2016 Apple Inc. All rights reserved.</p>
    <ul class="piped">
        <li><a href="http://www.apple.com/legal/internet-services/terms/site.html" class="first">Terms of Use</a></li>
        <li><a href="http://www.apple.com/privacy/privacy-policy/">Privacy Policy</a></li>
    </ul>
</div>

<!--<div id="gf-links piped footer-links">
	<ul>
		<li><a href="/cn/" title="Simplified Chinese">简体中文</a></li>
		<li><a href="/jp/" title="Japanese">日本語</a></li>
		<li><a href="/kr/" title="Korean">한국어</a></li>
	</ul>
</div>-->

  </div><!--/globalfooter-->
</body>
</html>
