<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="Author" content="Apple Inc." />
<meta name="viewport" content="width=1024" />
<link rel="shortcut icon" href="../../../favicon.ico" />
<link rel="icon" href="../../../favicon.ico" />
<link rel="stylesheet" href="https://www.apple.com/wss/fonts?family=Myriad+Set+Pro&amp;v=2" type="text/css" />
<link rel="stylesheet" href="../../../assets/styles/transition-global.css" type="text/css" />
<link rel="stylesheet" href="../../../assets/styles/transition-header.css" type="text/css" />
<link rel="stylesheet" href="https://devimages.apple.com.edgekey.net/assets/core/styles/adc.css" type="text/css" />
<link rel="stylesheet" href="https://devimages.apple.com.edgekey.net/assets/styles/topbar.css" type="text/css" />
<script src="https://devimages.apple.com.edgekey.net/assets/core/scripts/lib/prototype.js" type="text/javascript" charset="utf-8"></script>
<script src="https://devimages.apple.com.edgekey.net/assets/core/scripts/lib/scriptaculous.js" type="text/javascript" charset="utf-8"></script>
<script src="https://devimages.apple.com.edgekey.net/assets/core/scripts/browserdetect.js" type="text/javascript" charset="utf-8"></script>
<script src="https://devimages.apple.com.edgekey.net/assets/core/scripts/apple_core.js" type="text/javascript" charset="utf-8"></script>
<!--<script src="https://devimages.apple.com.edgekey.net/assets/core/scripts/search_decorator.js" type="text/javascript" charset="utf-8"></script>-->
<script src="https://devimages.apple.com.edgekey.net/assets/core/scripts/adc_core.js" type="text/javascript" charset="utf-8"></script>
<!--<script src="https://devimages.apple.com.edgekey.net/assets/scripts/ac_retina.js" type="text/javascript" charset="utf-8"></script>-->
<script src="https://devimages.apple.com.edgekey.net/assets/scripts/topbarDropdown.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
	document.write('<link rel="stylesheet" type="text/css" href="https://devimages.apple.com.edgekey.net/assets/styles/script.css" media="screen">');
</script>
<!-- Augmented Search -->
<!--<link rel="stylesheet" href="https://devimages.apple.com.edgekey.net/assets/styles/augmented_search.css" type="text/css">-->
<script src="https://devimages.apple.com.edgekey.net/assets/scripts/lib/jquery/jquery-1.11.0.min.js"></script>
<script>jQuery.noConflict();</script>
<script src="https://devimages.apple.com.edgekey.net/assets/scripts/lib/jquery/jquery.retinate.js" type="text/javascript" charset="utf-8"></script>
<!--<script src="https://devimages.apple.com.edgekey.net/assets/scripts/augmented_search.js"></script>-->
<script src="../../../assets/scripts/augmented_search.js"></script>
<script src="../../../assets/scripts/global-header.js"></script>

  <meta name="Author" content="Apple Inc.">
  <meta name="viewport" content="width=1024">
  <link rel="stylesheet" href="../AAT.css" type="text/css">
  <link rel="shortcut icon" href="https://devimages.apple.com.edgekey.net/favicon.ico">
  <link rel="icon" href="https://devimages.apple.com.edgekey.net/favicon.ico">
  <title>Bitmap Location Table</title>
</head>
<body class="white sidenav-page">
  <nav id="globalheader" role="navigation" aria-label="Global Navigation">
  <div id="gh-content" class="gh-content">
    <ul class="gh-menu">
      <li id="gh-menu-icon-toggle" class="gh-menu-icon gh-menu-icon-toggle enhance">
        <button id="gh-svg-icons" class="gh-svg-wrapper">
          <span class="text-replace">Menu</span>
          <svg x="0px" y="0px" width="100%" viewBox="0 0 96 96" class="gh-svg gh-svg-top" enable-background="new 0 0 96 96"><rect width="32" height="4" x="32" y="46" class="gh-svg-rect gh-svg-rect-top"></rect></svg>
          <svg x="0px" y="0px" width="100%" viewBox="0 0 96 96" class="gh-svg gh-svg-bottom" enable-background="new 0 0 96 96"><rect width="32" height="4" x="32" y="46" class="gh-svg-rect gh-svg-rect-bottom"></rect></svg>
        </button>
      </li>
      <li id="gh-menu-icon-home" class="gh-menu-icon gh-menu-icon-home">
        <a href="../../../index.html">
          <span class="text-replace">Apple Developer</span>
        </a>
      </li>
    </ul>
    <div class="gh-nav">
      <div class="gh-nav-view">
        <ul class="gh-nav-list">

          <li class="gh-tab gh-nav-developer" data-hires="true"><a class="gh-tab-link" href="../../../index.html"><span class="text-replace">Apple Developer</span></a></li>
          <li class="gh-tab gh-nav-technologies"><a class="gh-tab-link" href="../../../platforms/index.html">Platforms</a></li>
          <li class="gh-tab gh-nav-resources"><a class="gh-tab-link" href="../../../resources/index.html">Resources</a></li>
          <li class="gh-tab gh-nav-programs"><a class="gh-tab-link" href="../../../programs/index.html">Program</a></li>
          <li class="gh-tab gh-nav-support"><a class="gh-tab-link" href="../../../support/index.html">Support</a></li>
          <li class="gh-tab gh-nav-account">
            <a class="gh-tab-link gh-account-profile" href="https://developer.apple.com/account/">Account</a>
          </li>
          <li class="gh-tab gh-nav-search">

            <div id="gh-search" class="gh-search" role="search">
              <form action="/search/index.php" method="get" class="gh-search-form" id="gh-search-form" role="search">

                <div class="gh-search-input-wrapper">
                  <label for="gh-search-input" class="text-replace">Search Apple Developer</label>
                  <input type="text" name="q" id="gh-search-input" class="augmented gh-search-input" placeholder="Search Apple Developer" autocomplete="off" autocorrect="off" autocapitalize="off">
                </div>

                <button disabled type="submit" id="gh-search-submit" class="gh-search-submit gh-search-magnify"><span class="text-replace">Search Apple Developer</span></button>
                <button disabled type="reset" id="gh-search-reset" class="gh-search-reset"><span class="text-replace">Reset</span></button>

              </form>
            </div>

            <a class="gh-search-magnify" href="../../../search/index.html"><span class="text-replace">Search Apple Developer</span></a>

          </li>
        </ul>
      </div>
    </div>
  </div>
</nav>

  <div id="top">
<!-- SiteCatalyst code version: H.8. Copyright 1997-2006 Omniture, Inc. -->
<script type="text/javascript">
/* RSID: */
var s_account="appleglobal,appleusdeveloper"
</script>

<script type="text/javascript" src="https://www.apple.com/metrics/scripts/s_code_h.js"></script>
<script type="text/javascript">
s.pageName= AC && AC.Tracking && AC.Tracking.pageName();
s.channel="www.us.developer"

/************* DO NOT ALTER ANYTHING BELOW THIS LINE ! **************/
var s_code=s.t();if(s_code)document.write(s_code)</script>
<!-- End SiteCatalyst code version: H.8. -->
</div>

  <div id="content" class="content" data-hires="false">
    <section>
  <div id="navBar">
    <!-- NAVBARSTART -->
    <p class="bold"><a href="../index.html">TrueType Reference Manual</a></p>
    <ul class="outer">
      <li><a href="../RM01/Chap1.html">Digitizing Letterforms</a></li>
      <li><a href="../RM02/Chap2.html">The Font Engine</a></li>
      <li><a href="../RM03/Chap3.html">Instructing Fonts</a></li>
      <li><a href="../RM04/Chap4.html">The Graphics State</a></li>
      <li><a href="../RM05/Chap5.html">The Instruction Set</a></li>
      <li><a href="Chap6.html">Font Tables</a></li>
      <li class="c1">
        <ul class="inner">
          <li><a href="Chap6.html#Intro">Introduction</a></li>
          <li><a href="Chap6.html#Types">Data Types</a></li>
          <li><a href="Chap6.html#Overview">Overview of TrueType</a></li>
          <li><a href="Chap6AATIntro.html">Overview of AAT</a></li>
          <li><a href="Chap6Tables.html">Special Tables</a></li>
          <li><a href="Chap6.html#Directory">The Font Directory</a></li>
          <li><a href="Chap6acnt.html">The <code>'acnt'</code> table</a></li>
          <li><a href="Chap6ankr.html">The <code>'ankr'</code> table</a></li>
          <li><a href="Chap6avar.html">The <code>'avar'</code> table</a></li>
          <li><a href="Chap6bdat.html">The <code>'bdat'</code> table</a></li>
          <li><a href="Chap6bhed.html">The <code>'bhed'</code> table</a></li>
          <li>The <code>'bloc'</code> table</li>
          <li><a href="Chap6bsln.html">The <code>'bsln'</code> table</a></li>
          <li><a href="Chap6cmap.html">The <code>'cmap'</code> table</a></li>
          <li><a href="Chap6cvar.html">The <code>'cvar'</code> table</a></li>
          <li><a href="Chap6cvt.html">The <code>'cvt '</code> table</a></li>
          <li><a href="Chap6EBSC.html">The <code>'EBSC'</code> table</a></li>
          <li><a href="Chap6fdsc.html">The <code>'fdsc'</code> table</a></li>
          <li><a href="Chap6feat.html">The <code>'feat'</code> table</a></li>
          <li><a href="Chap6fmtx.html">The <code>'fmtx'</code> table</a></li>
          <li><a href="Chap6fond.html">The <code>'fond'</code> table</a></li>
          <li><a href="Chap6fpgm.html">The <code>'fpgm'</code> table</a></li>
          <li><a href="Chap6fvar.html">The <code>'fvar'</code> table</a></li>
          <li><a href="Chap6gasp.html">The <code>'gasp'</code> table</a></li>
          <li><a href="Chap6gcid.html">The <code>'gcid'</code> table</a></li>
          <li><a href="Chap6glyf.html">The <code>'glyf'</code> table</a></li>
          <li><a href="Chap6gvar.html">The <code>'gvar'</code> table</a></li>
          <li><a href="Chap6hdmx.html">The <code>'hdmx'</code> table</a></li>
          <li><a href="Chap6head.html">The <code>'head'</code> table</a></li>
          <li><a href="Chap6hhea.html">The <code>'hhea'</code> table</a></li>
          <li><a href="Chap6hmtx.html">The <code>'hmtx'</code> table</a></li>
          <li><a href="Chap6just.html">The <code>'just'</code> table</a></li>
          <li><a href="Chap6kern.html">The <code>'kern'</code> table</a></li>
          <li><a href="Chap6kerx.html">The <code>'kerx'</code> table</a></li>
          <li><a href="Chap6lcar.html">The <code>'lcar'</code> table</a></li>
          <li><a href="Chap6loca.html">The <code>'loca'</code> table</a></li>
          <li><a href="Chap6ltag.html">The <code>'ltag'</code> table</a></li>
          <li><a href="Chap6maxp.html">The <code>'maxp'</code> table</a></li>
          <li><a href="Chap6meta.html">The <code>'meta'</code> table</a></li>
          <li><a href="Chap6mort.html">The <code>'mort'</code> table</a></li>
          <li><a href="Chap6morx.html">The <code>'morx'</code> table</a></li>
          <li><a href="Chap6name.html">The <code>'name'</code> table</a></li>
          <li><a href="Chap6opbd.html">The <code>'opbd'</code> table</a></li>
          <li><a href="Chap6OS2.html">The <code>'OS/2'</code> table</a></li>
          <li><a href="Chap6post.html">The <code>'post'</code> table</a></li>
          <li><a href="Chap6prep.html">The <code>'prep'</code> table</a></li>
          <li><a href="Chap6prop.html">The <code>'prop'</code> table</a></li>
          <li><a href="Chap6sbix.html">The <code>'sbix'</code> table</a></li>
          <li><a href="Chap6trak.html">The <code>'trak'</code> table</a></li>
          <li><a href="Chap6vhea.html">The <code>'vhea'</code> table</a></li>
          <li><a href="Chap6vmtx.html">The <code>'vmtx'</code> table</a></li>
          <li><a href="Chap6xref.html">The <code>'xref'</code> table</a></li>
          <li><a href="Chap6Zapf.html">The <code>'Zapf'</code> table</a></li>
        </ul>
      </li>
      <li><a href="../RM07/appendixA.html">Instruction Set Summary</a></li>
      <li><a href="../RM07/appendixB.html">Glyph Mappings</a></li>
      <li><a href="../RM08/appendixE.html">Converting Outlines</a></li>
	<li><a href="../RM09/AppendixF.html">Font Feature Registry</a></li>
    </ul><!-- NAVBAREND -->
  </div>
  <div id="chapterContent">
    <header><h1><a name="bloc" id="bloc"></a>The <code>'bloc'</code> table</h1></header>
    <h2>General table information</h2>
    <h3>Introduction</h3>
    <p>The <dfn>bitmap location table</dfn> (tag name: <code>'bloc'</code>) provides information about the availability of bitmaps at requested point sizes. If a bitmap is included in the font, it also tells where the data is located in the <a href="Chap6bdat.html">bitmap data table</a>. The bitmap location and bitmap data tables support various formats.</p>
    <p>While the format theoretically permits some features like sparse glyph sets, implementations may not support these features. It's usually best to check with the software provider to see how much of this (or, indeed, any) table is supported.</p>
    <hr>
    <h3>Bitmap Location Table Format</h3>
    <p>The overall structure of the bitmap location table is shown in the following figure:</p>
    <p><img src="FF75.gif" width="242" height="118" naturalsizeflag="3"></p>
    <p>The header for the bitmap location table is shown in the following table:</p>
    <table border="1" cellpadding="0">
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
      <tr>
        <td>fixed</td>
        <td>version</td>
        <td class="description">Version number of the bitmap location table (0x00020000 for the initial version).</td>
      </tr>
      <tr>
        <td>uint32</td>
        <td>numSizes</td>
        <td class="description">The number of bitmapSizeTables in this table.</td>
      </tr>
      <tr>
        <td>variable</td>
        <td>bitmapSizeTable[numSizes]</td>
        <td class="description">Subtables describing the general characteristics of the bitmapped glyphs in this font. Also contains the indexSubTableArrayOffset.</td>
      </tr>
    </table>
    <p>Each <code>bitmapSizeTable</code> subtable provides information about the global characteristics of a particular set of bitmaps.</p>
    <p><strong>Note:</strong> The sizes must be sorted in ascending order.</p>
    <p>The format for the <code>bitmapSizeTable</code> (which refers to the <code>indexSubTableArray</code>, which in turn refers to an <code>indexSubTable</code>) is shown in the following table:</p>
    <table border="1" cellpadding="0">
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
      <tr>
        <td>uint32</td>
        <td>indexSubTableArrayOffset</td>
        <td class="description">Offset to corresponding index subtable array from the beginning of the 'bloc'.</td>
      </tr>
      <tr>
        <td>uint32</td>
        <td>indexTableSize</td>
        <td class="description">Length of corresponding index subtables and array</td>
      </tr>
      <tr>
        <td>uint32</td>
        <td>numberOfIndexSubTables</td>
        <td class="description">Number of index subtables (there is one for each range or format change).</td>
      </tr>
      <tr>
        <td>uint32</td>
        <td>colorRef</td>
        <td class="description">Set to 0, ignore for now.</td>
      </tr>
      <tr>
        <td>sbitLineMetrics</td>
        <td>hori</td>
        <td class="description">Horizontal line metrics.</td>
      </tr>
      <tr>
        <td>sbitLineMetrics</td>
        <td>vert</td>
        <td class="description">Vertical line metrics.</td>
      </tr>
      <tr>
        <td>uint16</td>
        <td>startGlyphIndex</td>
        <td class="description">Lowest glyph index for this size.</td>
      </tr>
      <tr>
        <td>uint16</td>
        <td>endGlyphIndex</td>
        <td class="description">Highest glyph index for this size.</td>
      </tr>
      <tr>
        <td>uint8</td>
        <td>ppemX</td>
        <td class="description">Target horizontal ppem.</td>
      </tr>
      <tr>
        <td>uint8</td>
        <td>ppemY</td>
        <td class="description">Target vertical ppem.</td>
      </tr>
      <tr>
        <td>uint8</td>
        <td>bitDepth</td>
        <td class="description">Bit depth of the strike.</td>
      </tr>
      <tr>
        <td>uint8</td>
        <td>flags</td>
        <td class="description">See <a href="Chap6bloc.html#Flags">table</a> below; first two bits are for orientation, vertical or horizontal.</td>
      </tr>
    </table>
    <p>The <code>indexSubTableArrayOffset</code> is the offset from the beginning of the <code>'bloc'</code> table to the indexSubTableArray. Each strike has one of these arrays to support various formats and discontiguous ranges of bitmaps. This array is described in more detail below.</p>
    <p>The <code>indexTableSize</code> is the total number of bytes in the index subtable array and the associated index tables.</p>
    <p>The <code>numberOfIndexSubTables</code> is a count of the index tables for this strike.</p>
    <p>The <code>colorRef</code> is put in for future enhancements that are not currently supported by the TrueType scaler, but these fields are already in use by other platforms, and are defined as follows.</p>
    <ul>
      <li>If <code>bitDepth</code> = 1 and <code>colorRef</code> = 0, then the glyphs are 1 bit per pixel. (AAT fonts should only use this set of values).</li>
      <li>If <code>bitDepth</code> = <var>n</var> and <code>colorRef</code> = 0, then the glyphs are black-and-white, but pre-expanded for drawing into that particular bit depth (e.g. a 2, 4, 8, 16, 24-bit screen).</li>
      <li>If <code>bitDepth</code> = <var>n</var> and <code>colorRef</code> = <var>m</var>, then these are complex multi-bit glyphs, and the data pointed to by the <code>colorRef</code> determines what they mean. These could be color fonts, anti-aliased fonts, grey levels, or anything else. If the <code>colorRef</code> is anything but zero, the sfnt must have a <code>'colr'</code> table. The <code>colorRef</code> is used with this table to get more information on the sbit. A separate table is used (instead of an offset in the <code>'bloc'</code> table) since a color table has implications outside of the scope of sbits.</li>
    </ul>
    <p>To recap, the <code>bitDepth</code> is what it says, the depth of this strike. This is useful for greyscale or color fonts. To maintain compatibility with scalers that will read <code>sbit</code> data, the following table shows how the <code>colorRef</code> and <code>bitDepth</code> values are used:</p>
    <table border="1" cellpadding="0">
      <tr>
        <th>bitDepth</th>
        <th>colorRef</th>
        <th>Meaning</th>
      </tr>
      <tr>
        <td>1</td>
        <td>0</td>
        <td class="description">Standard 1-bit font.</td>
      </tr>
      <tr>
        <td><var>n</var></td>
        <td>0</td>
        <td class="description">Multi-bit black and white font.</td>
      </tr>
      <tr>
        <td><var>n</var></td>
        <td><var>m</var></td>
        <td class="description">Color, grayscale, anti-aliased, etc.</td>
      </tr>
    </table>
    <p>The horizontal and vertical line metrics follow. These contain the ascender, descender and maximum pixel width information. Additionally, the caret information used by AAT Line Layout is included. The slope is used to determine the angle at which the caret is to be drawn and the offset is how many pixels (plus or minus) to move the caret. This is a signed <code>char</code> value (and not a <code>fixed</code>) since we are dealing with integer metrics. The <code>minOriginSB</code>, <code>minAdvanceSB</code>, <code>maxBeforeBL</code>, and <code>minAfterBL</code> values are described below. These values are primarily used by scalers that may need to pre-allocate memory and/or need more metric information to position glyphs. These numbers are not used by the sbit scaler on the Macintosh, but may be used on other platforms.</p>
    <p>The global metric information about the strike is kept in a <code>sbitLineMetrics</code> record, one for the horizontal metrics and one for the vertical. The format of the <code>sbitLineMetrics</code> record is shown in the following table:</p>
    <table border="1" cellpadding="0">
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
      <tr>
        <td>int8</td>
        <td>ascender</td>
        <td class="description">This is the spacing of the line before the baseline.</td>
      </tr>
      <tr>
        <td>int8</td>
        <td>descender</td>
        <td class="description">This is the spacing of the line after the baseline.</td>
      </tr>
      <tr>
        <td>uint8</td>
        <td>widthMax</td>
        <td class="description">Maximum pixel width of glyphs in strike. (Not used by AAT, may be used by other platforms.)</td>
      </tr>
      <tr>
        <td>int8</td>
        <td>caretSlopeNumerator</td>
        <td class="description">Rise of the caret slope, typically set to 1 for non-italic fonts.</td>
      </tr>
      <tr>
        <td>int8</td>
        <td>caretSlopeDenominator</td>
        <td class="description">Run of the caret slope, typically set to 0 for non-italic fonts.</td>
      </tr>
      <tr>
        <td>int8</td>
        <td>caretOffset</td>
        <td class="description">Offset in pixels to move the caret for proper positioning.</td>
      </tr>
      <tr>
        <td>int8</td>
        <td>minOriginSB</td>
        <td class="description">Minimum of horiBearingX (or vertBearingY for a vertical font).</td>
      </tr>
      <tr>
        <td>int8</td>
        <td>minAdvanceSB</td>
        <td class="description">Minimum of horiAdvance - horiBearingX + width (or vertAdvance - vertBearingY + height for a vertical font). (Not used by AAT, may be used by other platforms)</td>
      </tr>
      <tr>
        <td>int8</td>
        <td>maxBeforeBL</td>
        <td class="description">Maximum of horiBearingY (or vertBearingY for a vertical font). (Not used by AAT, may be used by other platforms)</td>
      </tr>
      <tr>
        <td>int8</td>
        <td>minAfterBL</td>
        <td class="description">Minimum of horiBearingY - height (or vertBearingX - width for a vertical font). (Not used by AAT, may be used by other platforms)</td>
      </tr>
      <tr>
        <td>int16</td>
        <td>pad</td>
        <td class="description">Padding to make long aligned.</td>
      </tr>
    </table>
    <p>An example of the <code>minOriginSB</code>, <code>minAdvanceSB</code>, <code>maxBeforeBL</code>, and <code>minAfterBL</code> values for horizontal text is given in the following figure. These values are calculated from the min and max values of the glyph metrics, which come from the <a href="Chap6bdat.html">bitmap data table</a>.</p>
    <p><img src="FF202.gif" width="469" height="215" naturalsizeflag="3"></p>
    <p>The same fields used in vertical text are shown in Figure 20-3.</p>
    <p><img src="FF203.gif" width="463" height="202" naturalsizeflag="3"></p>
    <p>Most of the formats have metric information in either <code>bigGlyphMetrics</code> or <code>smallGlyphMetrics</code>. The big metrics contain both horizontal and vertical metrics whereas the small metrics only hold metrics for one direction. The <code>bitmapSizeTable.flag</code> field indicates if the small metrics are horizontal or vertical for a given strike (see the following <a name="Flags" id="Flags"></a>table for the flag values). The scaler makes up fake metrics for the orientation that is not included.</p>
    <table border="1" cellpadding="0">
      <tr>
        <th>Mask</th>
        <th>Name</th>
        <th>Meaning</th>
      </tr>
      <tr>
        <td>0x01</td>
        <td>flgHorizontal</td>
        <td class="description">Small metrics are horizontal for the given strike.</td>
      </tr>
      <tr>
        <td>0x02</td>
        <td>flgVertical</td>
        <td class="description">Small metrics are vertical for the given strike.</td>
      </tr>
    </table>
    <p>The index subtable array contains the glyph ranges and offsets to indexes within this table. After determining the strike to use the scaler goes to this array to search for the index that contains the glyph number. When the index is found it will be an offset to an index subtable. The index subtable array is located via the <code>indexSubTableArrayOffset</code> in the corresponding <code>bitmapSizeTable</code>. The first <code>indexSubTableArray</code> is after the last <code>bitmapSizeTable</code> entry. Then the index subtables for the strike follow. The next <code>indexSubTableArray</code> (if more than one strike exists) and its index subtables are next. Each of the indexes must start on a long boundary; when using format 3, sometimes an extra <code>uint16</code> is needed in the offset array for padding. This table then continues with this array and indexes for each strike.</p>
    <p>The format of the <code>indexSubTableArray</code> is shown in the following table:</p>
    <table border="1" cellpadding="0">
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
      <tr>
        <td>uint16</td>
        <td>firstGlyphIndex</td>
        <td class="description">Index of first glyph in this range.</td>
      </tr>
      <tr>
        <td>uint16</td>
        <td>lastGlyphIndex</td>
        <td class="description">Index of last glyph in this range.</td>
      </tr>
      <tr>
        <td>uint32</td>
        <td>additionalOffsetToIndexSubtable</td>
        <td class="description">Used to reach the indexSubTable; add to indexSubTableArrayOffset to get the offset from the beginning of the 'bloc' table.</td>
      </tr>
    </table>
    <p>Finally we get to the index subtable. Currently there are two formats of indexes: one for proportional data and one for monospaced data. Whether the data is fixed size or variable size determines which index to use. Note: the format of the <code>'bdat'</code> data can be in any format. It is not determined by the index format. The index tells us where the information for a particular glyph starts in the <code>'bdat'</code> and how large the data is. The size of the data for the glyph is the difference of <code>offsetArray</code>[<var>glyphIndex+1</var>] - <code>offsetArray</code>[<var>glyphIndex</var>]. The format 1 index subtable is the proportional format index. This will be used for most roman fonts and the first 200 or so glyphs in large Chinese, Japanese or Korean fonts. The <code>imageFormat</code> tells us what kind of data is in the <a href="Chap6bdat.html">bitmap data table</a>.</p>
    <p>Each index subtable provides information about the location of the actual bitmap data for each glyph in the font. The indexSubTables that actually contain the location of the glyph data in the <code>'bdat'</code> table come in three formats. Format 1 is for proportionally spaced glyphs. Format 2 is for mono-spaced glyphs. Format 3 is also for proporionally spaced glyphs but uses an array of uint16 instead of uint32 and is thus a compressed form of format one. Each of the indexSubTables have an indexSubHeader. The format of the index subheader is shown in the following table:</p>
    <table border="1" cellpadding="0">
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
      <tr>
        <td>uint16</td>
        <td>indexFormat</td>
        <td class="description">Format number (1 is proportional with 4-byte offset deltas, 2 is monospaced, and 3 is proportional with 2-byte offset deltas).</td>
      </tr>
      <tr>
        <td>uint16</td>
        <td>imageFormat</td>
        <td class="description">Code for the kind of image data. See the description of the <code>'bdat'</code> table for the interpretation of this value.</td>
      </tr>
      <tr>
        <td>uint32</td>
        <td>imageDataOffset</td>
        <td class="description">Offset to the base of the image data for this index subtable.</td>
      </tr>
    </table>
    <p>In format 1 and format 3, data are stored contiguously so that the length of the data for any glyph is given by subtracting the location for the glyph from the location of the next glyph. If the length is zero, then no bitmap is available for that glyph in that bitmap set. The Format 1 bitmap index subtable is shown in the following table:</p>
    <table border="1" cellpadding="0">
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
      <tr>
        <td>indexSubHeader</td>
        <td>header</td>
        <td class="description">Header info as described above.</td>
      </tr>
      <tr>
        <td>uint32</td>
        <td>offsetArray[]</td>
        <td class="description">offsetArray[glyphIndex] + imageDataOffset = start of the bitmap data for the glyph.</td>
      </tr>
    </table>
    <p>The format 3 index subtable is also a proportional format index. It is just like format 1 except the offsets are shorts instead of longs.</p>
    <p>The Format 3 bitmap index subtable is shown in the following table:</p>
    <table border="1" cellpadding="0">
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
      <tr>
        <td>indexSubHeader</td>
        <td>header</td>
        <td class="description">Header info as described above.</td>
      </tr>
      <tr>
        <td>uint16</td>
        <td>offsetArray[]</td>
        <td class="description">offsetArray[glyphIndex] + imageDataOffset = start of the bitmap data for the glyph.</td>
      </tr>
    </table>
    <p>For monospaced fonts the metrics are the same and only the bitmap changes. For those we use format 2 index subtables. The metrics are not in the bitmap data table, but rather are here in the subTable. Only the actual bitmap data is put in the bitmap data table for these glyphs. The data can be in various formats; byte aligned, bit aligned, compressed, etc. The size of all the bitmap data needed to be read in from the bitmap data table is the <code>imageSize</code>. The <code>imageDataOffset</code> is the offset into the bitmap data table for the first of this range of glyphs. The rest of the glyphs can easily be found by multiplying the <code>imageSize</code> by the difference (<var>theDesiredGlyphIndex</var> - <var>firstGlyphIndexInThisRange</var>), and then adding the result to the <code>imageDataOffset</code> in the header of the index header.</p>
    <p>The Format 2 bitmap index subtable is shown in the following table:</p>
    <table border="1" cellpadding="0">
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
      <tr>
        <td>indexSubHeader</td>
        <td>header</td>
        <td class="description">Header info as described above.</td>
      </tr>
      <tr>
        <td>uint32</td>
        <td>imageSize</td>
        <td class="description">All the glyphs are of the same size. May be compressed, bit-aligned, or byte-aligned.</td>
      </tr>
      <tr>
        <td>bigGlyphMetrics</td>
        <td>bigMetrics</td>
        <td class="description">All the glyphs share the same metrics.</td>
      </tr>
    </table>
    <p>The metric information for index type 2 glyphs is of type bigGlyphMetrics, which is documented in the <a href="Chap6bdat.html">bitmap data table</a> documentation.</p>
    <h2>Platform-specific Information</h2>
    <p>Embedded bitmaps intended for use with OS X 8.5 and earlier versions of OS X <em>must</em> contain one bitmap glyphs for every glyphs in the font. Sparse bitmaps are not allowed on OS X.</p>
    <p>The fields <code>minOriginSB</code>, <code>minAdvanceSB</code>, <code>maxBeforeBL</code>, and <code>minAfterBL</code> in the <code>sbitLineMetrics</code> records are not used on OS X.</p>
    <h2>Dependencies</h2>
    <p>A <code>'bloc'</code> table is inextricably connected with the font's <code><a href="Chap6bdat.html">'bdat'</a></code> <a href="Chap6bdat.html">(bitmap data) table</a>. If one is present, the other must be, too, and a change to one will almost inevitably trigger a change in the other.</p>
    <p>As a rule, most font editing tools will probably find it more convenient to read and write the two tables simultaneously rather than treat them separately. This, for example, is done by Apple’s <span class="toolName">ftxdumperfuser</span> tool.</p>
    <p>The number of glyphs in the embedded bitmaps as indicated for the font's individual point sizes must be equal to the number of glyphs in the font as contained in the <code><a href="Chap6maxp.html">'maxp'</a></code> <a href="Chap6maxp.html">(maximum profile) table</a>.</p>
  </div>

      </section>
  </div><!-- /content -->

  <div id="globalfooter">
    <div id="breadory">
      <ol id="breadcrumbs">
        <li class="home"><a href="../../../index.html">Developer</a></li>
        <li><a href="../../index.html">Fonts</a></li>
        <li><a href="../index.html">TrueType™ Reference Manual</a></li>
        <li>The TrueType Font File</li>
      </ol>
      <div id="directorynav" class="directorynav">
	<div id="dn-cola" class="column">
		<h3><a href="../../../platforms/index.html">Platforms</a></h3>
		<ul>
			<li><a href="../../../ios/index.html">iOS</a></li>
			<li><a href="../../../osx/index.html">OS X</a></li>
			<li><a href="../../../watchos/index.html">watchOS</a></li>
			<li><a href="../../../tvos/index.html">tvOS</a></li>
		</ul>
		<h3><a href="../../../resources/index.html">Tools</a></h3>
		<ul>
			<li><a href="../../../xcode/index.html">Xcode</a></li>
			<li><a href="../../../swift/index.html">Swift</a></li>
		</ul>
	</div>
	<div id="dn-colb" class="column">
		<h3><a href="../../../resources/index.html">Resources</a></h3>
		<ul>
			<li><a href="../../../library/index.html">Documentation</a></li>
			<li><a href="../../../videos/index.html">Videos</a></li>
			<li><a href="https://forums.developer.apple.com/">Forums</a></li>
			<li><a href="../../../app-store/index.html">App Store</a></li>
			<li><a href="../../../safari/index.html">Safari and Web</a></li>
			<li><a href="../../../education/index.html">Education</a></li>
			<li><a href="../../../enterprise/index.html">Enterprise</a></li>
		</ul>
	</div>
	<div id="dn-colc" class="column">
		<h3><a href="../../../programs/index.html">Programs</a></h3>
		<ul>
			<li><a href="../../../programs/index.html">Developer Program</a></li>
			<li><a href="../../../programs/enterprise/index.html">Enterprise Program</a></li>
			<li><a href="../../../programs/ios/university/index.html">iOS University Program</a></li>
			<li><a href="../../../programs/mfi/index.html">MFi Program</a></li>
		</ul>
	</div>
	<div id="dn-cold" class="column">
		<h3><a href="../../../support/index.html">Support</a></h3>
		<ul>
			<li><a href="../../../support/development/index.html">Development</a></li>
			<li><a href="../../../support/distribution/index.html">Distribution</a></li>
			<li><a href="../../../support/membership/index.html">Membership</a></li>
			<li><a href="../../../system-status/index.html">System Status</a></li>
		</ul>
	</div>
	<div id="dn-cole" class="column">
		<h3><a href="https://developer.apple.com/account/">Account</a></h3>
		<ul>
			<li><a href="https://developer.apple.com/account/">Developer Account</a></li>
			<li><a href="../../../go/index-id=certificates-ids-profiles.html">Certificates, IDs &amp; Profiles</a></li>
			<li><a href="https://itunesconnect.apple.com">iTunes Connect</a></li>			
			<li><a href="../../../terms/index.html">License Agreements</a></li>
		</ul>
	</div>
</div>

    </div><!--/breadory-->
    <ul class="gf-links piped footer-links">
  <li><a href="../../../news/index.html" class="first">News &amp; Updates</a></li>
  <li><a href="../../../bug-reporting/index.html">Report Bugs</a></li>
  <li><a href="../../../contact/index.html">Contact Us</a></li>
</ul>

<div class="gf-sosumi footer-sosumi">
  <p>Copyright © 2016 Apple Inc. All rights reserved.</p>
    <ul class="piped">
        <li><a href="http://www.apple.com/legal/internet-services/terms/site.html" class="first">Terms of Use</a></li>
        <li><a href="http://www.apple.com/privacy/privacy-policy/">Privacy Policy</a></li>
    </ul>
</div>

<!--<div id="gf-links piped footer-links">
	<ul>
		<li><a href="/cn/" title="Simplified Chinese">简体中文</a></li>
		<li><a href="/jp/" title="Japanese">日本語</a></li>
		<li><a href="/kr/" title="Korean">한국어</a></li>
	</ul>
</div>-->

  </div><!--/globalfooter-->
</body>
</html>
