<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="Author" content="Apple Inc." />
<meta name="viewport" content="width=1024" />
<link rel="shortcut icon" href="../../../favicon.ico" />
<link rel="icon" href="../../../favicon.ico" />
<link rel="stylesheet" href="https://www.apple.com/wss/fonts?family=Myriad+Set+Pro&amp;v=2" type="text/css" />
<link rel="stylesheet" href="../../../assets/styles/transition-global.css" type="text/css" />
<link rel="stylesheet" href="../../../assets/styles/transition-header.css" type="text/css" />
<link rel="stylesheet" href="https://devimages.apple.com.edgekey.net/assets/core/styles/adc.css" type="text/css" />
<link rel="stylesheet" href="https://devimages.apple.com.edgekey.net/assets/styles/topbar.css" type="text/css" />
<script src="https://devimages.apple.com.edgekey.net/assets/core/scripts/lib/prototype.js" type="text/javascript" charset="utf-8"></script>
<script src="https://devimages.apple.com.edgekey.net/assets/core/scripts/lib/scriptaculous.js" type="text/javascript" charset="utf-8"></script>
<script src="https://devimages.apple.com.edgekey.net/assets/core/scripts/browserdetect.js" type="text/javascript" charset="utf-8"></script>
<script src="https://devimages.apple.com.edgekey.net/assets/core/scripts/apple_core.js" type="text/javascript" charset="utf-8"></script>
<!--<script src="https://devimages.apple.com.edgekey.net/assets/core/scripts/search_decorator.js" type="text/javascript" charset="utf-8"></script>-->
<script src="https://devimages.apple.com.edgekey.net/assets/core/scripts/adc_core.js" type="text/javascript" charset="utf-8"></script>
<!--<script src="https://devimages.apple.com.edgekey.net/assets/scripts/ac_retina.js" type="text/javascript" charset="utf-8"></script>-->
<script src="https://devimages.apple.com.edgekey.net/assets/scripts/topbarDropdown.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
	document.write('<link rel="stylesheet" type="text/css" href="https://devimages.apple.com.edgekey.net/assets/styles/script.css" media="screen">');
</script>
<!-- Augmented Search -->
<!--<link rel="stylesheet" href="https://devimages.apple.com.edgekey.net/assets/styles/augmented_search.css" type="text/css">-->
<script src="https://devimages.apple.com.edgekey.net/assets/scripts/lib/jquery/jquery-1.11.0.min.js"></script>
<script>jQuery.noConflict();</script>
<script src="https://devimages.apple.com.edgekey.net/assets/scripts/lib/jquery/jquery.retinate.js" type="text/javascript" charset="utf-8"></script>
<!--<script src="https://devimages.apple.com.edgekey.net/assets/scripts/augmented_search.js"></script>-->
<script src="../../../assets/scripts/augmented_search.js"></script>
<script src="../../../assets/scripts/global-header.js"></script>

  <meta name="Author" content="Apple Inc.">
  <meta name="viewport" content="width=1024">
  <link rel="shortcut icon" href="https://devimages.apple.com.edgekey.net/favicon.ico">
  <link rel="icon" href="https://devimages.apple.com.edgekey.net/favicon.ico">
  <link rel="stylesheet" href="../AAT.css" type="text/css">
  <title>Converting Outlines to TrueType</title>
</head>
<body class="white sidenav-page">
  <nav id="globalheader" role="navigation" aria-label="Global Navigation">
  <div id="gh-content" class="gh-content">
    <ul class="gh-menu">
      <li id="gh-menu-icon-toggle" class="gh-menu-icon gh-menu-icon-toggle enhance">
        <button id="gh-svg-icons" class="gh-svg-wrapper">
          <span class="text-replace">Menu</span>
          <svg x="0px" y="0px" width="100%" viewBox="0 0 96 96" class="gh-svg gh-svg-top" enable-background="new 0 0 96 96"><rect width="32" height="4" x="32" y="46" class="gh-svg-rect gh-svg-rect-top"></rect></svg>
          <svg x="0px" y="0px" width="100%" viewBox="0 0 96 96" class="gh-svg gh-svg-bottom" enable-background="new 0 0 96 96"><rect width="32" height="4" x="32" y="46" class="gh-svg-rect gh-svg-rect-bottom"></rect></svg>
        </button>
      </li>
      <li id="gh-menu-icon-home" class="gh-menu-icon gh-menu-icon-home">
        <a href="../../../index.html">
          <span class="text-replace">Apple Developer</span>
        </a>
      </li>
    </ul>
    <div class="gh-nav">
      <div class="gh-nav-view">
        <ul class="gh-nav-list">

          <li class="gh-tab gh-nav-developer" data-hires="true"><a class="gh-tab-link" href="../../../index.html"><span class="text-replace">Apple Developer</span></a></li>
          <li class="gh-tab gh-nav-technologies"><a class="gh-tab-link" href="../../../platforms/index.html">Platforms</a></li>
          <li class="gh-tab gh-nav-resources"><a class="gh-tab-link" href="../../../resources/index.html">Resources</a></li>
          <li class="gh-tab gh-nav-programs"><a class="gh-tab-link" href="../../../programs/index.html">Program</a></li>
          <li class="gh-tab gh-nav-support"><a class="gh-tab-link" href="../../../support/index.html">Support</a></li>
          <li class="gh-tab gh-nav-account">
            <a class="gh-tab-link gh-account-profile" href="https://developer.apple.com/account/">Account</a>
          </li>
          <li class="gh-tab gh-nav-search">

            <div id="gh-search" class="gh-search" role="search">
              <form action="/search/index.php" method="get" class="gh-search-form" id="gh-search-form" role="search">

                <div class="gh-search-input-wrapper">
                  <label for="gh-search-input" class="text-replace">Search Apple Developer</label>
                  <input type="text" name="q" id="gh-search-input" class="augmented gh-search-input" placeholder="Search Apple Developer" autocomplete="off" autocorrect="off" autocapitalize="off">
                </div>

                <button disabled type="submit" id="gh-search-submit" class="gh-search-submit gh-search-magnify"><span class="text-replace">Search Apple Developer</span></button>
                <button disabled type="reset" id="gh-search-reset" class="gh-search-reset"><span class="text-replace">Reset</span></button>

              </form>
            </div>

            <a class="gh-search-magnify" href="../../../search/index.html"><span class="text-replace">Search Apple Developer</span></a>

          </li>
        </ul>
      </div>
    </div>
  </div>
</nav>

  <div id="top">
<!-- SiteCatalyst code version: H.8. Copyright 1997-2006 Omniture, Inc. -->
<script type="text/javascript">
/* RSID: */
var s_account="appleglobal,appleusdeveloper"
</script>

<script type="text/javascript" src="https://www.apple.com/metrics/scripts/s_code_h.js"></script>
<script type="text/javascript">
s.pageName= AC && AC.Tracking && AC.Tracking.pageName();
s.channel="www.us.developer"

/************* DO NOT ALTER ANYTHING BELOW THIS LINE ! **************/
var s_code=s.t();if(s_code)document.write(s_code)</script>
<!-- End SiteCatalyst code version: H.8. -->
</div>

  <div id="content" class="content" data-hires="false">
    <section>

  <div id="navBar">
    <!-- NAVBARSTART -->
    <p class="bold"><a href="../index.html">TrueType Reference Manual</a></p>
    <ul class="outer">
      <li><a href="../RM01/Chap1.html">Digitizing Letterforms</a></li>
      <li><a href="../RM02/Chap2.html">The Font Engine</a></li>
      <li><a href="../RM03/Chap3.html">Instructing Fonts</a></li>
      <li><a href="../RM04/Chap4.html">The Graphics State</a></li>
      <li><a href="../RM05/Chap5.html">The Instruction Set</a></li>
      <li><a href="../RM06/Chap6.html">Font Tables</a></li>
      <li class="c1">
        <ul class="inner">
          <li><a href="../RM06/Chap6.html#Intro">Introduction</a></li>
          <li><a href="../RM06/Chap6.html#Types">Data Types</a></li>
          <li><a href="../RM06/Chap6.html#Overview">Overview of TrueType</a></li>
          <li><a href="../RM06/Chap6AATIntro.html">Overview of AAT</a></li>
          <li><a href="../RM06/Chap6Tables.html">Special Tables</a></li>
          <li><a href="../RM06/Chap6.html#Directory">The Font Directory</a></li>
          <li><a href="../RM06/Chap6acnt.html">The <code>'acnt'</code> table</a></li>
          <li><a href="../RM06/Chap6ankr.html">The <code>'ankr'</code> table</a></li>
          <li><a href="../RM06/Chap6avar.html">The <code>'avar'</code> table</a></li>
          <li><a href="../RM06/Chap6bdat.html">The <code>'bdat'</code> table</a></li>
          <li><a href="../RM06/Chap6bhed.html">The <code>'bhed'</code> table</a></li>
          <li><a href="../RM06/Chap6bloc.html">The <code>'bloc'</code> table</a></li>
          <li><a href="../RM06/Chap6bsln.html">The <code>'bsln'</code> table</a></li>
          <li><a href="../RM06/Chap6cmap.html">The <code>'cmap'</code> table</a></li>
          <li><a href="../RM06/Chap6cvar.html">The <code>'cvar'</code> table</a></li>
          <li><a href="../RM06/Chap6cvt.html">The <code>'cvt '</code> table</a></li>
          <li><a href="../RM06/Chap6EBSC.html">The <code>'EBSC'</code> table</a></li>
          <li><a href="../RM06/Chap6fdsc.html">The <code>'fdsc'</code> table</a></li>
          <li><a href="../RM06/Chap6feat.html">The <code>'feat'</code> table</a></li>
          <li><a href="../RM06/Chap6fmtx.html">The <code>'fmtx'</code> table</a></li>
          <li><a href="../RM06/Chap6fond.html">The <code>'fond'</code> table</a></li>
          <li><a href="../RM06/Chap6fpgm.html">The <code>'fpgm'</code> table</a></li>
          <li><a href="../RM06/Chap6fvar.html">The <code>'fvar'</code> table</a></li>
          <li><a href="../RM06/Chap6gasp.html">The <code>'gasp'</code> table</a></li>
          <li><a href="../RM06/Chap6gcid.html">The <code>'gcid'</code> table</a></li>
          <li><a href="../RM06/Chap6glyf.html">The <code>'glyf'</code> table</a></li>
          <li><a href="../RM06/Chap6gvar.html">The <code>'gvar'</code> table</a></li>
          <li><a href="../RM06/Chap6hdmx.html">The <code>'hdmx'</code> table</a></li>
          <li><a href="../RM06/Chap6head.html">The <code>'head'</code> table</a></li>
          <li><a href="../RM06/Chap6hhea.html">The <code>'hhea'</code> table</a></li>
          <li><a href="../RM06/Chap6hmtx.html">The <code>'hmtx'</code> table</a></li>
          <li><a href="../RM06/Chap6just.html">The <code>'just'</code> table</a></li>
          <li><a href="../RM06/Chap6kern.html">The <code>'kern'</code> table</a></li>
          <li><a href="../RM06/Chap6kerx.html">The <code>'kerx'</code> table</a></li>
          <li><a href="../RM06/Chap6lcar.html">The <code>'lcar'</code> table</a></li>
          <li><a href="../RM06/Chap6loca.html">The <code>'loca'</code> table</a></li>
          <li><a href="../RM06/Chap6maxp.html">The <code>'maxp'</code> table</a></li>
          <li><a href="../RM06/Chap6meta.html">The <code>'meta'</code> table</a></li>
          <li><a href="../RM06/Chap6mort.html">The <code>'mort'</code> table</a></li>
          <li><a href="../RM06/Chap6morx.html">The <code>'morx'</code> table</a></li>
          <li><a href="../RM06/Chap6name.html">The <code>'name'</code> table</a></li>
          <li><a href="../RM06/Chap6opbd.html">The <code>'opbd'</code> table</a></li>
          <li><a href="../RM06/Chap6OS2.html">The <code>'OS/2'</code> table</a></li>
          <li><a href="../RM06/Chap6post.html">The <code>'post'</code> table</a></li>
          <li><a href="../RM06/Chap6prep.html">The <code>'prep'</code> table</a></li>
          <li><a href="../RM06/Chap6prop.html">The <code>'prop'</code> table</a></li>
          <li><a href="../RM06/Chap6sbix.html">The <code>'sbix'</code> table</a></li>
          <li><a href="../RM06/Chap6trak.html">The <code>'trak'</code> table</a></li>
          <li><a href="../RM06/Chap6vhea.html">The <code>'vhea'</code> table</a></li>
          <li><a href="../RM06/Chap6vmtx.html">The <code>'vmtx'</code> table</a></li>
          <li><a href="../RM06/Chap6xref.html">The <code>'xref'</code> table</a></li>
          <li><a href="../RM06/Chap6Zapf.html">The <code>'Zapf'</code> table</a></li>
        </ul>
      </li>
      <li><a href="../RM07/appendixA.html">Instruction Set Summary</a></li>
      <li><a href="../RM07/appendixB.html">Glyph Mappings</a></li>
      <li>Converting Outlines</li>
      <li><a href="../RM09/AppendixF.html">Font Feature Registry</a></li>
    </ul><!-- NAVBAREND -->
  </div>
  <div id="chapterContent">
    <header><h1>Converting Outlines to the TrueType Format</h1></header>
    <p>This section considers some of the issues involved in converting outlines from other outline formats to the quadratic splines supported by the TrueType format.<br></p>
    <p>A key issue in any outline font design is how closely must the curves used to represent a glyph shape resemble the intended glyph design. For designs developed directly in the TrueType format the curves used define the design exactly. A more complex problem arises when converting from some other format or when digitizing a paper design.<br></p>
    <p>Here the problem is one of determining an acceptable error or tolerance value. Once this number is established, conversion becomes merely a matter of finding a set of quadratic curves that describe the original design within the stated tolerance.<br></p>
    <p>While a given curve may not be exactly representable in the quadratic spline format, that curve can always be represented as accurately as required. The tricky parts in this process are determining the degree of accuracy needed and then deciding how to establish whether a given font meets the accuracy guidelines.<br></p>
    <p><br></p>
    <h2>How much error is acceptable?</h2>
    <p>If the possible error in an outline description is less than the error inherent in the most sensitive rendering device expected to be used, none of the attainable accuracy in the typeface design is lost. As a rule of thumb, an error that is less than 1/1000 of the em square will generally meet this guideline.<br></p>
    <p>In attempting to decide whether the chosen error tolerance is acceptable, it is necessaryto look at the output produced. The quality obtained with the letter "s" is often a good indicator of the acceptability of that tolerance, asthere are many curves and transition points.<br></p>
    <p><br></p>
    <h2>How to measure error?</h2>There is more than one way to measure the error involved in curve approximation. All of the available methods have associated pitfalls. This book can only suggest some approaches that might be taken and warn against some of the pitfalls.<br>
    <p>In looking at the original curve and the curve intended to approximate it, it might be tempting to measure the error of approximation by looking at the curve value for each of the two parametric equations specifying the two curves at the same value for t. This method may not work, however, as the two curves will most likely have different velocities making it necessary to reparameterize the two curves in terms of arc length.<br></p>
    <p>In looking at the original curve and the curve intended to approximate it, it might be tempting to measure the error of approximation by looking at the curve value for each of the two parametric equations specifying the two curves at the same value for t. This method may not work, however, as the two curves will most likely have different velocities making it necessary to reparameterize the two curves in terms of arc length.<br></p>
    <p>A better method for determining the error would be to measure the distance for the original curve to the new curve along a perpendicular line as shown in FIGURE 1 below.<br></p>
    <p><strong><font size="-1">FIGURE 1</font></strong> <font size="-1">Measuring the error in a curve approximation</font></p>
    <p><img src="appendixE1.gif" width="321" height="122" naturalsizeflag="3" align="bottom"></p>
    <h2>Converting from other formats</h2>
    <p>If the paper design is digitized directly as quadratic splines the major work of describing outlines in the TrueType format is done. If, however, the art work is digitized as some other type of curve, it will be necessary to convert those curves to quadratic splines.<br></p>
    <p>If you are converting from another format your goal should not be an exact match between the original curves and the new curves. Depending upon the original format, this goal may be impossible to achieve. In addition, an exact match is not necessary to obtain a high quality outline. A more suitable goal is to render the original design with sufficient accuracy that additional efforts toward making the outline more closely resemble the original design will result in no difference in the final output.<br></p>
    <p>From cubics to quadratics<br></p>
    <p>It is possible that the outlines you obtain will be described as cubic curves. If so, it is not possible to perform an exact conversion between the two formats. It is, however, possible to convert the curve descriptions to the degree of accuracy required. That is, you can reduce any error in the translation to an arbitrarily small tolerance.<br></p>
    <p>The paragraphs that follow sketch out a method for converting between these two formats.<br></p>
    <ol>
      <li>Decompose each contour into "curve sections", that is, units on which it makes sense to replace one kind of curve with another.<br></li>
      <li>Subdivide each curve at its inflection points.<br>
      Inflection point are locations at which the curvature changes direction. Parabolic curves cannot have inflection points, hence curves with inflection points cannot be successfully approximated using quadratic splines. This is not a problem, however, as such curves can be subdivided at their inflection points.<br></li>
      <li>Fit to a selected tolerance.<br>
        <p>The goal of this step is to find the smallest (or some number close to the smallest) number of quadratic splines that will approximate the curve with an error factor that is less than the selected tolerance. The method for accomplishing this is to approximate the curve with a single parabola, measure the error, compare that error with the tolerance. If the error is within the tolerance, the fitting is successful. If the error exceeds the tolerance, there is more work to be done.FIGURE 2 illustrates a first attempt at approximating a curve with a quadratic spline.<br></p>
        <p><strong><font size="-1">FIGURE 2</font></strong> <font size="-1">First cut at approximating a curve with a parabola</font></p>
        <p><img src="appendixE2.gif" width="214" height="230" naturalsizeflag="3" align="bottom"></p>
        <p>One method for reducing the error is to employ a process known as recursive subdivision. That is, divide the curve into two portions, fit a quadratic to each of these portions, and check the error against the tolerance. Repeat the subdivision process until the tolerance condition is satisfied. Two possible choices for the location at which you split the curve are the midpoint or the location where the error is largest. FIGURE 3 shows the process of subdividing a curve in an effort to find two quadratic curves that provide a better overall fit to the original curve.</p>
        <p><br>
        <strong><font size="-1">FIGURE 3</font></strong> <font size="-1">Subdividing a curve to reduce the error</font></p>
        <p><img src="appendixE3.gif" width="205" height="176" naturalsizeflag="3" align="bottom"></p>
        <p>Once you have split the curve into two and done the curve fitting, you can optimize the final result (that is minimize the number of quadratics used) by satisfying what is known as the equi-ripple condition. Each of the two curves will have its own error term. It is, however, the maximum of these two error terms that is of concern. By clever choice of the intermediate point you can approximately equalize the two error terms thus reducing the maximum error term.FIGURE 4 illustrates an attempt a minimizing the error term by changing the choice of the intermediate point.</p>
        <p><br>
        <strong><font size="-1">FIGURE 4</font></strong> <font size="-1">Moving the dividing point to equalize the error factor</font></p>
        <p><img src="appendixE4.gif" width="333" height="212" naturalsizeflag="3" align="bottom"></p>
        <p>Given a tolerance there are several approaches that will generate quadratics that match the original cubics to that tolerance. The best approach guarantees that the minimum number of quadratics is used. In general, more quadratics than cubics will be needed to represent a given contour to a specified tolerance. This method will require considerable processing time and is therefore not useful if you need to do on-the-fly conversion.</p>
      </li>
    </ol>
  </div>

      </section>
  </div><!-- /content -->

  <div id="globalfooter">
    <div id="breadory">
      <ol id="breadcrumbs">
        <li class="home"><a href="../../../index.html">Developer</a></li>
        <li><a href="../../index.html">Fonts</a></li>
        <li><a href="../index.html">TrueType™ Reference Manual</a></li>
        <li>Converting Outlines to the TrueType Format</li>
      </ol>
      <div id="directorynav" class="directorynav">
	<div id="dn-cola" class="column">
		<h3><a href="../../../platforms/index.html">Platforms</a></h3>
		<ul>
			<li><a href="../../../ios/index.html">iOS</a></li>
			<li><a href="../../../osx/index.html">OS X</a></li>
			<li><a href="../../../watchos/index.html">watchOS</a></li>
			<li><a href="../../../tvos/index.html">tvOS</a></li>
		</ul>
		<h3><a href="../../../resources/index.html">Tools</a></h3>
		<ul>
			<li><a href="../../../xcode/index.html">Xcode</a></li>
			<li><a href="../../../swift/index.html">Swift</a></li>
		</ul>
	</div>
	<div id="dn-colb" class="column">
		<h3><a href="../../../resources/index.html">Resources</a></h3>
		<ul>
			<li><a href="../../../library/index.html">Documentation</a></li>
			<li><a href="../../../videos/index.html">Videos</a></li>
			<li><a href="https://forums.developer.apple.com/">Forums</a></li>
			<li><a href="../../../app-store/index.html">App Store</a></li>
			<li><a href="../../../safari/index.html">Safari and Web</a></li>
			<li><a href="../../../education/index.html">Education</a></li>
			<li><a href="../../../enterprise/index.html">Enterprise</a></li>
		</ul>
	</div>
	<div id="dn-colc" class="column">
		<h3><a href="../../../programs/index.html">Programs</a></h3>
		<ul>
			<li><a href="../../../programs/index.html">Developer Program</a></li>
			<li><a href="../../../programs/enterprise/index.html">Enterprise Program</a></li>
			<li><a href="../../../programs/ios/university/index.html">iOS University Program</a></li>
			<li><a href="../../../programs/mfi/index.html">MFi Program</a></li>
		</ul>
	</div>
	<div id="dn-cold" class="column">
		<h3><a href="../../../support/index.html">Support</a></h3>
		<ul>
			<li><a href="../../../support/development/index.html">Development</a></li>
			<li><a href="../../../support/distribution/index.html">Distribution</a></li>
			<li><a href="../../../support/membership/index.html">Membership</a></li>
			<li><a href="../../../system-status/index.html">System Status</a></li>
		</ul>
	</div>
	<div id="dn-cole" class="column">
		<h3><a href="https://developer.apple.com/account/">Account</a></h3>
		<ul>
			<li><a href="https://developer.apple.com/account/">Developer Account</a></li>
			<li><a href="../../../go/index-id=certificates-ids-profiles.html">Certificates, IDs &amp; Profiles</a></li>
			<li><a href="https://itunesconnect.apple.com">iTunes Connect</a></li>			
			<li><a href="../../../terms/index.html">License Agreements</a></li>
		</ul>
	</div>
</div>

    </div><!--/breadory-->
    <ul class="gf-links piped footer-links">
  <li><a href="../../../news/index.html" class="first">News &amp; Updates</a></li>
  <li><a href="../../../bug-reporting/index.html">Report Bugs</a></li>
  <li><a href="../../../contact/index.html">Contact Us</a></li>
</ul>

<div class="gf-sosumi footer-sosumi">
  <p>Copyright © 2016 Apple Inc. All rights reserved.</p>
    <ul class="piped">
        <li><a href="http://www.apple.com/legal/internet-services/terms/site.html" class="first">Terms of Use</a></li>
        <li><a href="http://www.apple.com/privacy/privacy-policy/">Privacy Policy</a></li>
    </ul>
</div>

<!--<div id="gf-links piped footer-links">
	<ul>
		<li><a href="/cn/" title="Simplified Chinese">简体中文</a></li>
		<li><a href="/jp/" title="Japanese">日本語</a></li>
		<li><a href="/kr/" title="Korean">한국어</a></li>
	</ul>
</div>-->

  </div><!--/globalfooter-->
</body>
</html>